/* css/components/_perception-log.css */

/* Styles specific to the "Perception Log" widget */

#perception-log-widget {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  min-height: 100px; /* Specific to this widget, base provides others */
}

#perception-log-widget h3 {
  flex-shrink: 0; /* Specific to this widget's h3 */
  /* Common h3 styles are from _widgets-base.css */
}

#perception-log-list {
  list-style-type: none;
  padding: 0; /* Resetting default list padding */
  margin: 0; /* Resetting default list margin */
  overflow-y: auto;
  flex-grow: 1;
  font-family: var(--font-narrative);
  font-size: var(--font-size-small);
  color: var(--secondary-text-color);
  border: var(--border-width) solid var(--border-color-subtle);
  border-radius: var(--border-radius-sm);
  padding: var(--spacing-xs); /* Inner padding for content */
  background-color: var(
    --primary-bg-color
  ); /* Distinct background for the log itself */
}

#perception-log-list li {
  padding: var(--spacing-xs) var(--spacing-sm);
  border-bottom: var(--border-width) dashed var(--border-color-subtle);
  line-height: 1.5;
}

#perception-log-list li:last-child {
  border-bottom: none;
}

#perception-log-list li.empty-log-message {
  font-style: italic;
  text-align: center;
  color: var(--input-placeholder-color);
}

/* === Parchment Fantasy theme === */

#perception-log-list {
  background: #fff8e6;
  background-image: radial-gradient(rgba(0, 0, 0, 0.04) 8%, transparent 8%);
  background-size: 6px 6px; /* subtle paper grain */
  color: #5b4a24;
  font-family: 'Merriweather', serif;
  border: 2px solid #d6b97d;
}

#perception-log-list li {
  border-bottom: 1px dotted #d6b97d;
  padding: var(--spacing-xs) var(--spacing-sm);
}

#perception-log-list li:last-child {
  border-bottom: none;
}

/* Speech lines */
.log-speech .speaker-cue {
  color: #4b3b9b;
  font-variant: small-caps;
  margin-right: 0.25em;
}

.log-speech {
  color: #3b2e10;
}

/* Action lines */
.log-action .action-text {
  color: #c87137;
  font-style: italic;
}

.log-action::before,
.log-action::after {
  content: '‚ùß';
  color: #c87137;
  margin: 0 0.25em;
}

/* Generic lines just inherit base colours */

/* Scrollbar matches parchment */
#perception-log-list::-webkit-scrollbar-thumb {
  background: #d6b97d;
}

/* Responsive adjustments for #perception-log-list max-height */
@media (max-width: 768px) {
  #perception-log-list {
    max-height: 150px;
  }
}

@media (max-width: 480px) {
  #perception-log-list {
    max-height: 120px;
  }
}

/* ============================================
   PERCEPTION TYPE-BASED THEMING
   ============================================
   Colors are WCAG AA compliant on parchment background (#fff8e6)
   See specs/perceptionType-consolidation.md for details
   ============================================ */

/* Root color variables for perception categories */
:root {
  --perception-communication: #6a1b9a; /* Purple */
  --perception-movement: #1565c0; /* Blue */
  --perception-combat: #c62828; /* Red */
  --perception-item: #e65100; /* Amber */
  --perception-container: #795548; /* Brown */
  --perception-connection: #546e7a; /* Steel */
  --perception-consumption: #2e7d32; /* Green */
  --perception-state: #00838f; /* Cyan */
  --perception-social: #ad1457; /* Pink */
  --perception-physical: #8d6e63; /* Tan */
  --perception-intimacy: #c2185b; /* Rose */
  --perception-performance: #f9a825; /* Gold */
  --perception-magic: #5c6bc0; /* Indigo */
  --perception-error: #b71c1c; /* Dark Red */
}

/* Category Classes - Primary Color Theming */
.log-cat-communication {
  color: var(--perception-communication);
}

.log-cat-movement {
  color: var(--perception-movement);
}

.log-cat-combat {
  color: var(--perception-combat);
  font-weight: 500;
}

.log-cat-item {
  color: var(--perception-item);
}

.log-cat-container {
  color: var(--perception-container);
}

.log-cat-connection {
  color: var(--perception-connection);
}

.log-cat-consumption {
  color: var(--perception-consumption);
}

.log-cat-state {
  color: var(--perception-state);
}

.log-cat-social {
  color: var(--perception-social);
}

.log-cat-physical {
  color: var(--perception-physical);
}

.log-cat-intimacy {
  color: var(--perception-intimacy);
}

.log-cat-performance {
  color: var(--perception-performance);
}

.log-cat-magic {
  color: var(--perception-magic);
  font-style: italic;
}

.log-cat-error {
  color: var(--perception-error);
  font-weight: 600;
}

/* Type-Specific Refinements */

/* Communication types */
.log-type-speech .speaker-name {
  font-weight: 600;
  font-variant: small-caps;
}

.log-type-speech .dialogue {
  font-style: normal;
}

.log-type-thought {
  font-style: italic;
  opacity: 0.9;
}

.log-type-notes {
  font-family: 'Courier New', monospace;
  font-size: 0.95em;
}

/* Combat types */
.log-type-death {
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.log-type-damage::before {
  content: '\2694 '; /* Crossed swords */
}

.log-type-violence::before {
  content: '\26A0 '; /* Warning sign */
}

/* Magic types */
.log-type-spell::before {
  content: '\2728 '; /* Sparkles */
}

.log-type-ritual::before {
  content: '\1F52E '; /* Crystal ball */
}

/* Performance types */
.log-type-music::before {
  content: '\266B '; /* Music note */
}

.log-type-dance::before {
  content: '\1F483 '; /* Dancer */
}

/* Error types */
.log-type-action-failed {
  text-decoration: line-through;
  opacity: 0.7;
}

.log-type-system-error {
  background-color: rgba(183, 28, 28, 0.1);
  padding: 0.25em 0.5em;
  border-radius: 3px;
}

/* Movement types */
.log-type-arrival::before {
  content: '\2192 '; /* Right arrow */
}

.log-type-departure::before {
  content: '\2190 '; /* Left arrow */
}

/* Action text (inside asterisks) */
.action-text {
  font-style: italic;
}
