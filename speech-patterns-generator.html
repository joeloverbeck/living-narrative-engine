<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Generate unique speech patterns for your character based on their complete persona"
    />
    <title>Speech Patterns Generator - Living Narrative Engine</title>

    <!-- Reuse existing character builder styles -->
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/components.css" />
    <link rel="stylesheet" href="css/speech-patterns-generator.css" />

    <!-- Standard favicon links (matching other pages) -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <!-- JavaScript bundle (built from src/speech-patterns-generator-main.js) -->
    <script type="module" src="speech-patterns-generator.js"></script>
  </head>
  <body>
    <!-- Skip link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <div id="app" class="cb-page-container">
      <!-- Header Section -->
      <header class="cb-page-header">
        <div class="header-content">
          <h1>Speech Patterns Generator</h1>
          <p class="header-subtitle">
            Generate unique speech patterns for your character based on their
            complete persona
          </p>
        </div>
      </header>

      <!-- Main Content Area -->
      <main id="main-content" class="cb-page-main speech-patterns-main">
        <!-- Left Panel: Character Input -->
        <aside class="cb-input-panel character-input-panel">
          <h2 class="cb-panel-title">Character Definition</h2>

          <!-- Content Guidelines Notice -->
          <div class="content-guidelines-notice">
            <div class="notice-header">
              <span class="notice-icon">âš ï¸</span>
              <strong>Content Guidelines: NC-21 (Adults Only)</strong>
            </div>
            <p class="notice-text">
              This application is for mature users. All topics, themes, and
              content are permissible if they serve authentic character
              portrayal, however dark, explicit, or controversial.
            </p>
          </div>

          <!-- Character Input Section -->
          <div class="character-input-section">
            <label for="character-definition" class="input-label">
              Character Definition (JSON)
            </label>
            <p class="input-description">
              Paste your complete character definition in JSON format. The
              generator will analyze their personality, background, and traits
              to create distinctive speech patterns.
            </p>

            <textarea
              id="character-definition"
              class="character-definition-input"
              placeholder="Paste your character JSON definition here..."
              rows="20"
              aria-label="Character definition in JSON format"
              aria-describedby="character-input-help"
            ></textarea>

            <div id="character-input-help" class="input-help">
              <p>
                Expected format: Complete character entity with components like
                core:name, core:personality, core:profile, etc.
              </p>
            </div>

            <!-- Enhanced Validation Display -->
            <div
              id="character-input-error"
              class="cb-error-message enhanced-validation-container"
              style="display: none"
              role="alert"
              aria-live="polite"
              aria-atomic="false"
            >
              <!-- Enhanced validation results will be inserted here -->
            </div>
          </div>

          <!-- Generation Controls -->
          <div class="generation-controls">
            <button
              id="generate-btn"
              class="cb-button cb-button-primary"
              disabled
              aria-label="Generate speech patterns"
              aria-keyshortcuts="Control+Enter"
            >
              <span class="button-icon">ğŸ­</span>
              <span class="button-text">Generate Speech Patterns</span>
            </button>

            <!-- Keyboard Shortcuts Help -->
            <div class="shortcut-hint">
              <div><kbd>Ctrl</kbd> + <kbd>Enter</kbd> to generate</div>
              <div><kbd>Ctrl</kbd> + <kbd>E</kbd> to export</div>
              <div>
                <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>Del</kbd> to clear
              </div>
              <div><kbd>Esc</kbd> to close dialogs</div>
            </div>
          </div>
        </aside>

        <!-- Right Panel: Results Display -->
        <section class="cb-output-panel speech-patterns-display-panel">
          <div class="cb-panel-header">
            <h2 class="cb-panel-title">Generated Speech Patterns</h2>
            <div class="panel-actions">
              <button
                id="clear-all-btn"
                class="cb-button cb-button-danger"
                disabled
                aria-label="Clear character input and results"
                aria-keyshortcuts="Control+Shift+Delete"
              >
                <span class="button-icon">ğŸ—‘ï¸</span>
                <span class="button-text">Clear All</span>
              </button>
              <div class="export-controls">
                <select
                  id="export-format"
                  class="cb-select export-format-select"
                  aria-label="Export format"
                  title="Select export format"
                >
                  <!-- Options populated dynamically -->
                </select>
                <div id="template-group" class="template-group" style="display: none;">
                  <select
                    id="export-template"
                    class="cb-select export-template-select"
                    aria-label="Export template"
                    title="Select export template"
                  >
                    <!-- Options populated dynamically -->
                  </select>
                </div>
                <button
                  id="export-btn"
                  class="cb-button cb-button-secondary"
                  disabled
                  aria-label="Export speech patterns"
                  aria-keyshortcuts="Control+E"
                >
                  <span class="button-icon">ğŸ“„</span>
                  <span class="button-text">Export</span>
                </button>
              </div>
            </div>
          </div>

          <!-- UI State Management Containers -->
          <!-- Loading State - Used by UIStateManager -->
          <div
            id="loading-state"
            class="ui-state-container loading-state"
            style="display: none"
            role="status"
            aria-live="polite"
          >
            <div class="loading-indicator">
              <div class="spinner" aria-hidden="true"></div>
              <p id="loading-message">Generating speech patterns...</p>
            </div>
          </div>

          <!-- Results State - Used by UIStateManager -->
          <div
            id="results-state"
            class="ui-state-container results-state"
            style="display: none"
            role="region"
            aria-label="Generated speech patterns"
          >
            <!-- Speech Patterns Results Container -->
            <div
              id="speech-patterns-container"
              class="speech-patterns-container"
            >
              <!-- Speech pattern results will be dynamically added here -->
            </div>
          </div>

          <!-- Error State - Used by UIStateManager -->
          <div
            id="error-state"
            class="ui-state-container error-state"
            style="display: none"
            role="alert"
          >
            <div class="error-container">
              <div class="error-icon" aria-hidden="true">âŒ</div>
              <div class="error-content">
                <h3 class="error-title">Generation Failed</h3>
                <p class="error-message" id="error-message">
                  <!-- Error message will be inserted here -->
                </p>
                <button
                  class="cb-button cb-button-secondary retry-btn"
                  id="retry-btn"
                >
                  Try Again
                </button>
              </div>
            </div>
          </div>

          <!-- Empty State - Default state when no content -->
          <div id="empty-state" class="ui-state-container empty-state">
            <div class="empty-state-icon">ğŸ­</div>
            <p class="empty-state-text">
              Paste a character definition and click "Generate Speech Patterns"
              to begin
            </p>
            <p class="empty-state-subtext">
              The generator will create ~20 unique speech patterns with
              character voice examples
            </p>
          </div>

          <!-- Legacy Loading Indicator - Kept for backward compatibility -->
          <div
            id="loading-indicator"
            class="loading-indicator"
            style="display: none"
            role="status"
            aria-live="polite"
          >
            <div class="spinner" aria-hidden="true"></div>
            <p>Generating speech patterns...</p>
          </div>
        </section>
      </main>

      <!-- Footer -->
      <footer class="cb-page-footer">
        <nav class="footer-navigation">
          <button
            id="back-btn"
            class="cb-button cb-button-navigation"
            aria-label="Back to Main Menu"
          >
            â† Back to Main Menu
          </button>
        </nav>

        <div class="footer-info">
          <span class="pattern-count" id="pattern-count"
            >0 patterns generated</span
          >
        </div>
      </footer>

      <!-- Screen Reader Announcements -->
      <div
        id="screen-reader-announcement"
        class="screen-reader-only"
        aria-live="polite"
        aria-atomic="true"
      >
        <!-- Dynamic announcements for screen readers -->
      </div>
    </div>
  </body>
</html>
