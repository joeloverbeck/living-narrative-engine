POST http://localhost:3001/api/llm-request 504 (Gateway Timeout)
attemptFn @ httpUtils.js:216
perform @ httpRetryManager.js:83
fetchWithRetry @ httpUtils.js:232
request @ retryHttpClient.js:189
#sendRequest @ baseOpenRouterStrategy.js:299
#handleResponse @ baseOpenRouterStrategy.js:411
execute @ baseOpenRouterStrategy.js:482
executeRequest @ llmRequestExecutor.js:69
getAIDecision @ configurableLLMAdapter.js:343
await in getAIDecision
choose @ llmChooser.js:69
await in choose
delegate @ llmDecisionProvider.js:40
choose @ delegatingDecisionProvider.js:54
decide @ abstractDecisionProvider.js:74
decideAction @ genericTurnStrategy.js:47
await in decideAction
_decideAction @ awaitingActorDecisionState.js:189
run @ actionDecisionWorkflow.js:34
_handleActionDecision @ awaitingActorDecisionState.js:102
enterState @ awaitingActorDecisionState.js:119
await in enterState
_transitionToState @ baseTurnHandler.js:260
await in _transitionToState
requestAwaitingInputStateTransition @ baseTurnHandler.js:661
requestAwaitingInputStateTransition @ turnContext.js:249
_requestAwaitingInput @ turnIdleState.js:140
startTurn @ turnIdleState.js:72
startTurn @ genericTurnHandler.js:134
startTurn @ actorTurnHandler.js:64
advanceTurn @ turnManager.js:438
await in advanceTurn
#handleTurnEndedEvent @ turnManager.js:595
(anonymous) @ turnManager.js:186
(anonymous) @ turnEventSubscription.js:57
setTimeout
setTimeout @ RealScheduler.js:13
wrapped @ turnEventSubscription.js:57
(anonymous) @ eventBus.js:144
dispatch @ eventBus.js:141
#emitEvent @ validatedEventDispatcher.js:192
dispatch @ validatedEventDispatcher.js:222
#dispatchViaValidatedDispatcher @ dispatchEventHandler.js:138
execute @ dispatchEventHandler.js:172
(anonymous) @ interpreterRegistrations.js:59
execute @ operationInterpreter.js:94
executeActionSequence @ actionSequence.js:114
await in executeActionSequence
_executeActions @ systemLogicInterpreter.js:464
#processRule @ systemLogicInterpreter.js:422
#handleEvent @ systemLogicInterpreter.js:325
await in #handleEvent
(anonymous) @ eventBus.js:144
dispatch @ eventBus.js:141
#emitEvent @ validatedEventDispatcher.js:192
dispatch @ validatedEventDispatcher.js:222
dispatchResult.#executeSafely.payload.payload @ safeEventDispatcher.js:124
#executeSafely @ safeEventDispatcher.js:88
dispatch @ safeEventDispatcher.js:122
dispatchWithErrorHandling @ eventDispatchService.js:114
dispatchAction @ commandProcessor.js:110
_dispatchAction @ commandProcessingWorkflow.js:204
processCommand @ commandProcessingWorkflow.js:480
_processCommandInternal @ processingCommandState.js:333
_executeAction @ processingWorkflow.js:261
await in _executeAction
run @ processingWorkflow.js:87
await in run
enterState @ processingCommandState.js:290
_transitionToState @ baseTurnHandler.js:260
await in _transitionToState
requestProcessingCommandStateTransition @ baseTurnHandler.js:677
requestProcessingCommandStateTransition @ turnContext.js:253
run @ actionDecisionWorkflow.js:62Understand this error
consoleLogger.js:175 VED: Payload validation FAILED for event 'core:system_warning_occurred'. Dispatch SKIPPED. Errors: [/details/raw]: must be string {payload: {…}, errors: Array(1)}
error @ consoleLogger.js:175
#validatePayload @ validatedEventDispatcher.js:144
dispatch @ validatedEventDispatcher.js:219
dispatchResult.#executeSafely.payload.payload @ safeEventDispatcher.js:124
#executeSafely @ safeEventDispatcher.js:88
dispatch @ safeEventDispatcher.js:122
#emitWarning @ retryHttpClient.js:132
request @ retryHttpClient.js:209
await in request
#sendRequest @ baseOpenRouterStrategy.js:299
#handleResponse @ baseOpenRouterStrategy.js:411
execute @ baseOpenRouterStrategy.js:482
executeRequest @ llmRequestExecutor.js:69
getAIDecision @ configurableLLMAdapter.js:343
await in getAIDecision
choose @ llmChooser.js:69
await in choose
delegate @ llmDecisionProvider.js:40
choose @ delegatingDecisionProvider.js:54
decide @ abstractDecisionProvider.js:74
decideAction @ genericTurnStrategy.js:47
await in decideAction
_decideAction @ awaitingActorDecisionState.js:189
run @ actionDecisionWorkflow.js:34
_handleActionDecision @ awaitingActorDecisionState.js:102
enterState @ awaitingActorDecisionState.js:119
await in enterState
_transitionToState @ baseTurnHandler.js:260
await in _transitionToState
requestAwaitingInputStateTransition @ baseTurnHandler.js:661
requestAwaitingInputStateTransition @ turnContext.js:249
_requestAwaitingInput @ turnIdleState.js:140
startTurn @ turnIdleState.js:72
startTurn @ genericTurnHandler.js:134
startTurn @ actorTurnHandler.js:64
advanceTurn @ turnManager.js:438
await in advanceTurn
#handleTurnEndedEvent @ turnManager.js:595
(anonymous) @ turnManager.js:186
(anonymous) @ turnEventSubscription.js:57
setTimeout
setTimeout @ RealScheduler.js:13
wrapped @ turnEventSubscription.js:57
(anonymous) @ eventBus.js:144
dispatch @ eventBus.js:141
#emitEvent @ validatedEventDispatcher.js:192
dispatch @ validatedEventDispatcher.js:222
#dispatchViaValidatedDispatcher @ dispatchEventHandler.js:138
execute @ dispatchEventHandler.js:172
(anonymous) @ interpreterRegistrations.js:59
execute @ operationInterpreter.js:94
executeActionSequence @ actionSequence.js:114
await in executeActionSequence
_executeActions @ systemLogicInterpreter.js:464
#processRule @ systemLogicInterpreter.js:422
#handleEvent @ systemLogicInterpreter.js:325
await in #handleEvent
(anonymous) @ eventBus.js:144
dispatch @ eventBus.js:141
#emitEvent @ validatedEventDispatcher.js:192
dispatch @ validatedEventDispatcher.js:222
dispatchResult.#executeSafely.payload.payload @ safeEventDispatcher.js:124
#executeSafely @ safeEventDispatcher.js:88
dispatch @ safeEventDispatcher.js:122
dispatchWithErrorHandling @ eventDispatchService.js:114
dispatchAction @ commandProcessor.js:110
_dispatchAction @ commandProcessingWorkflow.js:204
processCommand @ commandProcessingWorkflow.js:480
_processCommandInternal @ processingCommandState.js:333
_executeAction @ processingWorkflow.js:261
await in _executeAction
run @ processingWorkflow.js:87
await in run
enterState @ processingCommandState.js:290
_transitionToState @ baseTurnHandler.js:260
await in _transitionToState
requestProcessingCommandStateTransition @ baseTurnHandler.js:677
requestProcessingCommandStateTransition @ turnContext.js:253
run @ actionDecisionWorkflow.js:62Understand this error
consoleLogger.js:163 SafeEventDispatcher: Underlying VED failed to dispatch event 'core:system_warning_occurred' (returned false). See VED logs for details. Payload: {"message":"Retryable HTTP error 504 on http://localhost:3001/api/llm-request (attempt 1/4)","details":{"statusCode":504,"url":"http://localhost:3001/api/llm-request","raw":{"error":true,"message":"The proxy encountered a network issue or exhausted retries when trying to reach the LLM provider.","stage":"llm_forwarding_network_or_retry_exhausted","details":{"llmId":"openrouter-claude-sonnet-4-toolcalling","targetUrl":"https://openrouter.ai/api/v1/chat/completions","originalErrorMessage":"RetryManager: Failed for https://openrouter.ai/api/v1/chat/completions after 1 attempt(s). Unexpected error: fetch failed","originalProxiedErrorMessage":"fetch failed"},"originalStatusCode":504},"timestamp":"2025-07-20T18:31:38.573Z"}}
warn @ consoleLogger.js:163
dispatch @ safeEventDispatcher.js:136
await in dispatch
#emitWarning @ retryHttpClient.js:132
request @ retryHttpClient.js:209
await in request
#sendRequest @ baseOpenRouterStrategy.js:299
#handleResponse @ baseOpenRouterStrategy.js:411
execute @ baseOpenRouterStrategy.js:482
executeRequest @ llmRequestExecutor.js:69
getAIDecision @ configurableLLMAdapter.js:343
await in getAIDecision
choose @ llmChooser.js:69
await in choose
delegate @ llmDecisionProvider.js:40
choose @ delegatingDecisionProvider.js:54
decide @ abstractDecisionProvider.js:74
decideAction @ genericTurnStrategy.js:47
await in decideAction
_decideAction @ awaitingActorDecisionState.js:189
run @ actionDecisionWorkflow.js:34
_handleActionDecision @ awaitingActorDecisionState.js:102
enterState @ awaitingActorDecisionState.js:119
await in enterState
_transitionToState @ baseTurnHandler.js:260
await in _transitionToState
requestAwaitingInputStateTransition @ baseTurnHandler.js:661
requestAwaitingInputStateTransition @ turnContext.js:249
_requestAwaitingInput @ turnIdleState.js:140
startTurn @ turnIdleState.js:72
startTurn @ genericTurnHandler.js:134
startTurn @ actorTurnHandler.js:64
advanceTurn @ turnManager.js:438
await in advanceTurn
#handleTurnEndedEvent @ turnManager.js:595
(anonymous) @ turnManager.js:186
(anonymous) @ turnEventSubscription.js:57
setTimeout
setTimeout @ RealScheduler.js:13
wrapped @ turnEventSubscription.js:57
(anonymous) @ eventBus.js:144
dispatch @ eventBus.js:141
#emitEvent @ validatedEventDispatcher.js:192
dispatch @ validatedEventDispatcher.js:222
#dispatchViaValidatedDispatcher @ dispatchEventHandler.js:138
execute @ dispatchEventHandler.js:172
(anonymous) @ interpreterRegistrations.js:59
execute @ operationInterpreter.js:94
executeActionSequence @ actionSequence.js:114
await in executeActionSequence
_executeActions @ systemLogicInterpreter.js:464
#processRule @ systemLogicInterpreter.js:422
#handleEvent @ systemLogicInterpreter.js:325
await in #handleEvent
(anonymous) @ eventBus.js:144
dispatch @ eventBus.js:141
#emitEvent @ validatedEventDispatcher.js:192
dispatch @ validatedEventDispatcher.js:222
dispatchResult.#executeSafely.payload.payload @ safeEventDispatcher.js:124
#executeSafely @ safeEventDispatcher.js:88
dispatch @ safeEventDispatcher.js:122
dispatchWithErrorHandling @ eventDispatchService.js:114
dispatchAction @ commandProcessor.js:110
_dispatchAction @ commandProcessingWorkflow.js:204
processCommand @ commandProcessingWorkflow.js:480
_processCommandInternal @ processingCommandState.js:333
_executeAction @ processingWorkflow.js:261
await in _executeAction
run @ processingWorkflow.js:87
await in run
enterState @ processingCommandState.js:290
_transitionToState @ baseTurnHandler.js:260
await in _transitionToState
requestProcessingCommandStateTransition @ baseTurnHandler.js:677
requestProcessingCommandStateTransition @ turnContext.js:253
run @ actionDecisionWorkflow.js:62Understand this warning
httpUtils.js:216  POST http://localhost:3001/api/llm-request 504 (Gateway Timeout)
attemptFn @ httpUtils.js:216
perform @ httpRetryManager.js:83
fetchWithRetry @ httpUtils.js:232
request @ retryHttpClient.js:189
await in request
#sendRequest @ baseOpenRouterStrategy.js:299
#handleResponse @ baseOpenRouterStrategy.js:411
execute @ baseOpenRouterStrategy.js:482
executeRequest @ llmRequestExecutor.js:69
getAIDecision @ configurableLLMAdapter.js:343
await in getAIDecision
choose @ llmChooser.js:69
await in choose
delegate @ llmDecisionProvider.js:40
choose @ delegatingDecisionProvider.js:54
decide @ abstractDecisionProvider.js:74
decideAction @ genericTurnStrategy.js:47
await in decideAction
_decideAction @ awaitingActorDecisionState.js:189
run @ actionDecisionWorkflow.js:34
_handleActionDecision @ awaitingActorDecisionState.js:102
enterState @ awaitingActorDecisionState.js:119
await in enterState
_transitionToState @ baseTurnHandler.js:260
await in _transitionToState
requestAwaitingInputStateTransition @ baseTurnHandler.js:661
requestAwaitingInputStateTransition @ turnContext.js:249
_requestAwaitingInput @ turnIdleState.js:140
startTurn @ turnIdleState.js:72
startTurn @ genericTurnHandler.js:134
startTurn @ actorTurnHandler.js:64
advanceTurn @ turnManager.js:438
await in advanceTurn
#handleTurnEndedEvent @ turnManager.js:595
(anonymous) @ turnManager.js:186
(anonymous) @ turnEventSubscription.js:57
setTimeout
setTimeout @ RealScheduler.js:13
wrapped @ turnEventSubscription.js:57
(anonymous) @ eventBus.js:144
dispatch @ eventBus.js:141
#emitEvent @ validatedEventDispatcher.js:192
dispatch @ validatedEventDispatcher.js:222
#dispatchViaValidatedDispatcher @ dispatchEventHandler.js:138
execute @ dispatchEventHandler.js:172
(anonymous) @ interpreterRegistrations.js:59
execute @ operationInterpreter.js:94
executeActionSequence @ actionSequence.js:114
await in executeActionSequence
_executeActions @ systemLogicInterpreter.js:464
#processRule @ systemLogicInterpreter.js:422
#handleEvent @ systemLogicInterpreter.js:325
await in #handleEvent
(anonymous) @ eventBus.js:144
dispatch @ eventBus.js:141
#emitEvent @ validatedEventDispatcher.js:192
dispatch @ validatedEventDispatcher.js:222
dispatchResult.#executeSafely.payload.payload @ safeEventDispatcher.js:124
#executeSafely @ safeEventDispatcher.js:88
dispatch @ safeEventDispatcher.js:122
dispatchWithErrorHandling @ eventDispatchService.js:114
dispatchAction @ commandProcessor.js:110
_dispatchAction @ commandProcessingWorkflow.js:204
processCommand @ commandProcessingWorkflow.js:480
_processCommandInternal @ processingCommandState.js:333
_executeAction @ processingWorkflow.js:261
await in _executeAction
run @ processingWorkflow.js:87
await in run
enterState @ processingCommandState.js:290
_transitionToState @ baseTurnHandler.js:260
await in _transitionToState
requestProcessingCommandStateTransition @ baseTurnHandler.js:677
requestProcessingCommandStateTransition @ turnContext.js:253
run @ actionDecisionWorkflow.js:62Understand this error
consoleLogger.js:175 VED: Payload validation FAILED for event 'core:system_warning_occurred'. Dispatch SKIPPED. Errors: [/details/raw]: must be string {payload: {…}, errors: Array(1)}
error @ consoleLogger.js:175
#validatePayload @ validatedEventDispatcher.js:144
dispatch @ validatedEventDispatcher.js:219
dispatchResult.#executeSafely.payload.payload @ safeEventDispatcher.js:124
#executeSafely @ safeEventDispatcher.js:88
dispatch @ safeEventDispatcher.js:122
#emitWarning @ retryHttpClient.js:132
request @ retryHttpClient.js:209
await in request
#sendRequest @ baseOpenRouterStrategy.js:299
#handleResponse @ baseOpenRouterStrategy.js:411
execute @ baseOpenRouterStrategy.js:482
executeRequest @ llmRequestExecutor.js:69
getAIDecision @ configurableLLMAdapter.js:343
await in getAIDecision
choose @ llmChooser.js:69
await in choose
delegate @ llmDecisionProvider.js:40
choose @ delegatingDecisionProvider.js:54
decide @ abstractDecisionProvider.js:74
decideAction @ genericTurnStrategy.js:47
await in decideAction
_decideAction @ awaitingActorDecisionState.js:189
run @ actionDecisionWorkflow.js:34
_handleActionDecision @ awaitingActorDecisionState.js:102
enterState @ awaitingActorDecisionState.js:119
await in enterState
_transitionToState @ baseTurnHandler.js:260
await in _transitionToState
requestAwaitingInputStateTransition @ baseTurnHandler.js:661
requestAwaitingInputStateTransition @ turnContext.js:249
_requestAwaitingInput @ turnIdleState.js:140
startTurn @ turnIdleState.js:72
startTurn @ genericTurnHandler.js:134
startTurn @ actorTurnHandler.js:64
advanceTurn @ turnManager.js:438
await in advanceTurn
#handleTurnEndedEvent @ turnManager.js:595
(anonymous) @ turnManager.js:186
(anonymous) @ turnEventSubscription.js:57
setTimeout
setTimeout @ RealScheduler.js:13
wrapped @ turnEventSubscription.js:57
(anonymous) @ eventBus.js:144
dispatch @ eventBus.js:141
#emitEvent @ validatedEventDispatcher.js:192
dispatch @ validatedEventDispatcher.js:222
#dispatchViaValidatedDispatcher @ dispatchEventHandler.js:138
execute @ dispatchEventHandler.js:172
(anonymous) @ interpreterRegistrations.js:59
execute @ operationInterpreter.js:94
executeActionSequence @ actionSequence.js:114
await in executeActionSequence
_executeActions @ systemLogicInterpreter.js:464
#processRule @ systemLogicInterpreter.js:422
#handleEvent @ systemLogicInterpreter.js:325
await in #handleEvent
(anonymous) @ eventBus.js:144
dispatch @ eventBus.js:141
#emitEvent @ validatedEventDispatcher.js:192
dispatch @ validatedEventDispatcher.js:222
dispatchResult.#executeSafely.payload.payload @ safeEventDispatcher.js:124
#executeSafely @ safeEventDispatcher.js:88
dispatch @ safeEventDispatcher.js:122
dispatchWithErrorHandling @ eventDispatchService.js:114
dispatchAction @ commandProcessor.js:110
_dispatchAction @ commandProcessingWorkflow.js:204
processCommand @ commandProcessingWorkflow.js:480
_processCommandInternal @ processingCommandState.js:333
_executeAction @ processingWorkflow.js:261
await in _executeAction
run @ processingWorkflow.js:87
await in run
enterState @ processingCommandState.js:290
_transitionToState @ baseTurnHandler.js:260
await in _transitionToState
requestProcessingCommandStateTransition @ baseTurnHandler.js:677
requestProcessingCommandStateTransition @ turnContext.js:253
run @ actionDecisionWorkflow.js:62Understand this error
consoleLogger.js:163 SafeEventDispatcher: Underlying VED failed to dispatch event 'core:system_warning_occurred' (returned false). See VED logs for details. Payload: {"message":"Retryable HTTP error 504 on http://localhost:3001/api/llm-request (attempt 2/4)","details":{"statusCode":504,"url":"http://localhost:3001/api/llm-request","raw":{"error":true,"message":"The proxy encountered a network issue or exhausted retries when trying to reach the LLM provider.","stage":"llm_forwarding_network_or_retry_exhausted","details":{"llmId":"openrouter-claude-sonnet-4-toolcalling","targetUrl":"https://openrouter.ai/api/v1/chat/completions","originalErrorMessage":"RetryManager: Failed for https://openrouter.ai/api/v1/chat/completions after 1 attempt(s). Unexpected error: fetch failed","originalProxiedErrorMessage":"fetch failed"},"originalStatusCode":504},"timestamp":"2025-07-20T18:31:49.395Z"}}