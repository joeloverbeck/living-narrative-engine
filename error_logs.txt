
 FAIL   integration  tests/integration/characterBuilder/speechPatternsGeneratorRuntimeErrors.integration.test.js (10.565 s)
  ● SpeechPatternsGeneratorController - Runtime Errors › Service Registration › should have SpeechPatternsGenerator service available after our fix

    Failed to create instance for "ModsLoader" (lifecycle: singletonFactory): Failed to create instance for "ManifestPhase" (lifecycle: singletonFactory): Failed to create instance for "ModManifestProcessor" (lifecycle: singletonFactory): AppContainer: No service registered for key "IModValidationOrchestrator". Known keys: [ILogger, ProxyUrl, IConfiguration, IPathResolver, ISchemaValidator, IDataRegistry, IDataFetcher, ITextDataFetcher, RuleLoader, ComponentLoader, ConditionLoader, ActionLoader, EventLoader, MacroLoader, EntityLoader, EntityInstanceLoader, WorldLoader, GoalLoader, AnatomyRecipeLoader, AnatomyBlueprintLoader, AnatomyBlueprintPartLoader, AnatomySlotLibraryLoader, AnatomyFormattingLoader, ScopeLoader, ModManifestLoader, GameConfigLoader, PromptTextLoader, ModLoadOrderResolver, ModManifestProcessor, ContentLoadManager, WorldLoadSummaryLogger, SchemaPhase, GameConfigPhase, ManifestPhase, ContentPhase, WorldPhase, SummaryPhase, ILoadCache, ModsLoader, SchemaLoader, ServiceSetup, IPathConfiguration, ITraceConfigLoader, ActionIndexingService, EventBus, IEventBus, ISpatialIndexManager, IGameDataRepository, IValidatedEventDispatcher, ISafeEventDispatcher, EventDispatchService, ScopeEngine, DslParser, IScopeEngine, IScopeDslErrorFactory, IScopeDslErrorHandler, ICriticalLogNotifier, CriticalLogNotifier, IActionTraceConfigValidator, IActionTraceConfigLoader, ITraceDirectoryManager, IIndexedDBStorageAdapter, IActionTraceFilter, IJsonTraceFormatter, IHumanReadableFormatter, IActionTraceOutputService, IActionAwareStructuredTrace, IEventDispatchTracer, IErrorMetrics, IRetryManager, IRecoveryManager, ITraceErrorHandler, ITracingConfigurationInitializer, IStorageProvider, ISaveFileRepository, ISaveLoadService, PlaytimeTracker, ComponentCleaningService, SaveMetadataBuilder, ActiveModsManifestBuilder, GameStateCaptureService, ManualSaveCoordinator, GamePersistenceService, IEntityManager, IWorldContext, ClosenessCircleService, EntityDisplayDataProvider, SpatialIndexSynchronizer, LocationQueryService, EntityAccessService, ComponentAccessService, LocationDisplayService, GraphIntegrityValidator, AnatomyQueryCache, RecipeProcessor, PartSelectionService, SocketManager, EntityGraphBuilder, RecipeConstraintEvaluator, BodyBlueprintFactory, BodyGraphService, JsonLogicCustomOperators, JsonLogicEvaluationService, AnatomyFormattingService, DescriptorFormatter, BodyPartDescriptionBuilder, BodyDescriptionComposer, PartDescriptionGenerator, DescriptionPersistenceService, BodyDescriptionOrchestrator, AnatomyDescriptionService, AnatomyGenerationService, LayerCompatibilityService, ClothingSlotValidator, EquipmentOrchestrator, LayerResolutionService, IAnatomySocketIndex, IAnatomyBlueprintRepository, AnatomyClothingCache, SlotResolver, ClothingManagementService, EquipmentDescriptionService, ClothingInstantiationService, ClothingInstantiationServiceV2, AnatomyInitializationService, IPipelineServiceFactory, IPipelineServiceRegistry, ITargetDependencyResolver, ILegacyTargetCompatibilityLayer, IScopeContextBuilder, ITargetDisplayNameResolver, IScopeRegistry, ActionIndex, IScopeCacheStrategy, IUnifiedScopeResolver, ITargetContextBuilder, IMultiTargetResolutionStage, ITargetResolutionService, TraceContextFactory, IFixSuggestionEngine, IActionErrorContextBuilder, ActionCandidateProcessor, ActionPipelineOrchestrator, IActionDiscoveryService, ActionValidationContextBuilder, PrerequisiteEvaluationService, IActionExecutionTraceFactory, ICommandProcessor, UnifiedErrorHandler, DirectiveStrategyResolver, CommandDispatcher, DirectiveExecutor, ResultInterpreter, ICommandOutcomeInterpreter, DispatchEventHandler, DispatchPerceptibleEventHandler, DispatchSpeechHandler, DispatchThoughtHandler, LogHandler, ModifyComponentHandler, AddComponentHandler, RemoveComponentHandler, QueryComponentHandler, QueryComponentsHandler, SetVariableHandler, EndTurnHandler, SystemMoveEntityHandler, IMoveEntityHandler, GetTimestampHandler, GetNameHandler, RebuildLeaderListCacheHandler, CheckFollowCycleHandler, EstablishFollowRelationHandler, BreakFollowRelationHandler, AddPerceptionLogEntryHandler, QueryEntitiesHandler, HasComponentHandler, ModifyArrayFieldHandler, ModifyContextArrayHandler, IfCoLocatedHandler, MathHandler, AutoMoveFollowersHandler, MergeClosenessCircleHandler, RemoveFromClosenessCircleHandler, EstablishSittingClosenessHandler, RemoveSittingClosenessHandler, HasBodyPartWithComponentValueHandler, UnequipClothingHandler, LockMovementHandler, LockMouthEngagementHandler, UnlockMovementHandler, UnlockMouthEngagementHandler, RegenerateDescriptionHandler, AtomicModifyComponentHandler, SequenceHandler, OperationRegistry, OperationInterpreter, ActionSequence, SystemLogicInterpreter, IHttpClient, LlmConfigLoader, ILLMConfigurationManager, ILLMRequestExecutor, ILLMErrorMapper, ITokenEstimator, LLMAdapter, LlmJsonService, CharacterDatabase, CharacterStorageService, ThematicDirectionGenerator, ClicheGenerator, CoreMotivationsGenerator, CoreMotivationsDisplayEnhancer, TraitsGenerator, TraitsDisplayEnhancer, SpeechPatternsResponseProcessor, SpeechPatternsGenerator, SpeechPatternsDisplayEnhancer, TraitsRewriterGenerator, TraitsRewriterResponseProcessor, TraitsRewriterDisplayEnhancer, CharacterBuilderService, ICharacterBuilderService, IPromptOutputPort, ITurnEndPort, IActionCategorizationService, WorldInitializer, SystemInitializer]

      119 |           error
      120 |         );
    > 121 |         throw new Error(
          |               ^
      122 |           `Failed to create instance for "${registrationKey}" (lifecycle: ${lifecycle}): ${error.message}`,
      123 |           { cause: error }
      124 |         );

      at AppContainer.resolve (src/dependencyInjection/appContainer.js:121:15)
      at CharacterBuilderBootstrap.resolve (src/characterBuilder/CharacterBuilderBootstrap.js:761:34)
      at CharacterBuilderBootstrap.bootstrap (src/characterBuilder/CharacterBuilderBootstrap.js:103:29)
      at Object.<anonymous> (tests/integration/characterBuilder/speechPatternsGeneratorRuntimeErrors.integration.test.js:95:7)

    Cause:
    Failed to create instance for "ManifestPhase" (lifecycle: singletonFactory): Failed to create instance for "ModManifestProcessor" (lifecycle: singletonFactory): AppContainer: No service registered for key "IModValidationOrchestrator". Known keys: [ILogger, ProxyUrl, IConfiguration, IPathResolver, ISchemaValidator, IDataRegistry, IDataFetcher, ITextDataFetcher, RuleLoader, ComponentLoader, ConditionLoader, ActionLoader, EventLoader, MacroLoader, EntityLoader, EntityInstanceLoader, WorldLoader, GoalLoader, AnatomyRecipeLoader, AnatomyBlueprintLoader, AnatomyBlueprintPartLoader, AnatomySlotLibraryLoader, AnatomyFormattingLoader, ScopeLoader, ModManifestLoader, GameConfigLoader, PromptTextLoader, ModLoadOrderResolver, ModManifestProcessor, ContentLoadManager, WorldLoadSummaryLogger, SchemaPhase, GameConfigPhase, ManifestPhase, ContentPhase, WorldPhase, SummaryPhase, ILoadCache, ModsLoader, SchemaLoader, ServiceSetup, IPathConfiguration, ITraceConfigLoader, ActionIndexingService, EventBus, IEventBus, ISpatialIndexManager, IGameDataRepository, IValidatedEventDispatcher, ISafeEventDispatcher, EventDispatchService, ScopeEngine, DslParser, IScopeEngine, IScopeDslErrorFactory, IScopeDslErrorHandler, ICriticalLogNotifier, CriticalLogNotifier, IActionTraceConfigValidator, IActionTraceConfigLoader, ITraceDirectoryManager, IIndexedDBStorageAdapter, IActionTraceFilter, IJsonTraceFormatter, IHumanReadableFormatter, IActionTraceOutputService, IActionAwareStructuredTrace, IEventDispatchTracer, IErrorMetrics, IRetryManager, IRecoveryManager, ITraceErrorHandler, ITracingConfigurationInitializer, IStorageProvider, ISaveFileRepository, ISaveLoadService, PlaytimeTracker, ComponentCleaningService, SaveMetadataBuilder, ActiveModsManifestBuilder, GameStateCaptureService, ManualSaveCoordinator, GamePersistenceService, IEntityManager, IWorldContext, ClosenessCircleService, EntityDisplayDataProvider, SpatialIndexSynchronizer, LocationQueryService, EntityAccessService, ComponentAccessService, LocationDisplayService, GraphIntegrityValidator, AnatomyQueryCache, RecipeProcessor, PartSelectionService, SocketManager, EntityGraphBuilder, RecipeConstraintEvaluator, BodyBlueprintFactory, BodyGraphService, JsonLogicCustomOperators, JsonLogicEvaluationService, AnatomyFormattingService, DescriptorFormatter, BodyPartDescriptionBuilder, BodyDescriptionComposer, PartDescriptionGenerator, DescriptionPersistenceService, BodyDescriptionOrchestrator, AnatomyDescriptionService, AnatomyGenerationService, LayerCompatibilityService, ClothingSlotValidator, EquipmentOrchestrator, LayerResolutionService, IAnatomySocketIndex, IAnatomyBlueprintRepository, AnatomyClothingCache, SlotResolver, ClothingManagementService, EquipmentDescriptionService, ClothingInstantiationService, ClothingInstantiationServiceV2, AnatomyInitializationService, IPipelineServiceFactory, IPipelineServiceRegistry, ITargetDependencyResolver, ILegacyTargetCompatibilityLayer, IScopeContextBuilder, ITargetDisplayNameResolver, IScopeRegistry, ActionIndex, IScopeCacheStrategy, IUnifiedScopeResolver, ITargetContextBuilder, IMultiTargetResolutionStage, ITargetResolutionService, TraceContextFactory, IFixSuggestionEngine, IActionErrorContextBuilder, ActionCandidateProcessor, ActionPipelineOrchestrator, IActionDiscoveryService, ActionValidationContextBuilder, PrerequisiteEvaluationService, IActionExecutionTraceFactory, ICommandProcessor, UnifiedErrorHandler, DirectiveStrategyResolver, CommandDispatcher, DirectiveExecutor, ResultInterpreter, ICommandOutcomeInterpreter, DispatchEventHandler, DispatchPerceptibleEventHandler, DispatchSpeechHandler, DispatchThoughtHandler, LogHandler, ModifyComponentHandler, AddComponentHandler, RemoveComponentHandler, QueryComponentHandler, QueryComponentsHandler, SetVariableHandler, EndTurnHandler, SystemMoveEntityHandler, IMoveEntityHandler, GetTimestampHandler, GetNameHandler, RebuildLeaderListCacheHandler, CheckFollowCycleHandler, EstablishFollowRelationHandler, BreakFollowRelationHandler, AddPerceptionLogEntryHandler, QueryEntitiesHandler, HasComponentHandler, ModifyArrayFieldHandler, ModifyContextArrayHandler, IfCoLocatedHandler, MathHandler, AutoMoveFollowersHandler, MergeClosenessCircleHandler, RemoveFromClosenessCircleHandler, EstablishSittingClosenessHandler, RemoveSittingClosenessHandler, HasBodyPartWithComponentValueHandler, UnequipClothingHandler, LockMovementHandler, LockMouthEngagementHandler, UnlockMovementHandler, UnlockMouthEngagementHandler, RegenerateDescriptionHandler, AtomicModifyComponentHandler, SequenceHandler, OperationRegistry, OperationInterpreter, ActionSequence, SystemLogicInterpreter, IHttpClient, LlmConfigLoader, ILLMConfigurationManager, ILLMRequestExecutor, ILLMErrorMapper, ITokenEstimator, LLMAdapter, LlmJsonService, CharacterDatabase, CharacterStorageService, ThematicDirectionGenerator, ClicheGenerator, CoreMotivationsGenerator, CoreMotivationsDisplayEnhancer, TraitsGenerator, TraitsDisplayEnhancer, SpeechPatternsResponseProcessor, SpeechPatternsGenerator, SpeechPatternsDisplayEnhancer, TraitsRewriterGenerator, TraitsRewriterResponseProcessor, TraitsRewriterDisplayEnhancer, CharacterBuilderService, ICharacterBuilderService, IPromptOutputPort, ITurnEndPort, IActionCategorizationService, WorldInitializer, SystemInitializer]

      119 |           error
      120 |         );
    > 121 |         throw new Error(
          |               ^
      122 |           `Failed to create instance for "${registrationKey}" (lifecycle: ${lifecycle}): ${error.message}`,
      123 |           { cause: error }
      124 |         );

      at AppContainer.resolve (src/dependencyInjection/appContainer.js:121:15)
      at resolve (src/dependencyInjection/registrations/loadersRegistrations.js:433:25)
      at AppContainer.factoryFn [as _invokeFactory] (src/dependencyInjection/appContainer.js:249:12)
      at AppContainer._invokeFactory [as _createInstance] (src/dependencyInjection/appContainer.js:190:19)
      at AppContainer._createInstance [as resolve] (src/dependencyInjection/appContainer.js:109:31)
      at CharacterBuilderBootstrap.resolve (src/characterBuilder/CharacterBuilderBootstrap.js:761:34)
      at CharacterBuilderBootstrap.bootstrap (src/characterBuilder/CharacterBuilderBootstrap.js:103:29)
      at Object.<anonymous> (tests/integration/characterBuilder/speechPatternsGeneratorRuntimeErrors.integration.test.js:95:7)

    Cause:
    Failed to create instance for "ModManifestProcessor" (lifecycle: singletonFactory): AppContainer: No service registered for key "IModValidationOrchestrator". Known keys: [ILogger, ProxyUrl, IConfiguration, IPathResolver, ISchemaValidator, IDataRegistry, IDataFetcher, ITextDataFetcher, RuleLoader, ComponentLoader, ConditionLoader, ActionLoader, EventLoader, MacroLoader, EntityLoader, EntityInstanceLoader, WorldLoader, GoalLoader, AnatomyRecipeLoader, AnatomyBlueprintLoader, AnatomyBlueprintPartLoader, AnatomySlotLibraryLoader, AnatomyFormattingLoader, ScopeLoader, ModManifestLoader, GameConfigLoader, PromptTextLoader, ModLoadOrderResolver, ModManifestProcessor, ContentLoadManager, WorldLoadSummaryLogger, SchemaPhase, GameConfigPhase, ManifestPhase, ContentPhase, WorldPhase, SummaryPhase, ILoadCache, ModsLoader, SchemaLoader, ServiceSetup, IPathConfiguration, ITraceConfigLoader, ActionIndexingService, EventBus, IEventBus, ISpatialIndexManager, IGameDataRepository, IValidatedEventDispatcher, ISafeEventDispatcher, EventDispatchService, ScopeEngine, DslParser, IScopeEngine, IScopeDslErrorFactory, IScopeDslErrorHandler, ICriticalLogNotifier, CriticalLogNotifier, IActionTraceConfigValidator, IActionTraceConfigLoader, ITraceDirectoryManager, IIndexedDBStorageAdapter, IActionTraceFilter, IJsonTraceFormatter, IHumanReadableFormatter, IActionTraceOutputService, IActionAwareStructuredTrace, IEventDispatchTracer, IErrorMetrics, IRetryManager, IRecoveryManager, ITraceErrorHandler, ITracingConfigurationInitializer, IStorageProvider, ISaveFileRepository, ISaveLoadService, PlaytimeTracker, ComponentCleaningService, SaveMetadataBuilder, ActiveModsManifestBuilder, GameStateCaptureService, ManualSaveCoordinator, GamePersistenceService, IEntityManager, IWorldContext, ClosenessCircleService, EntityDisplayDataProvider, SpatialIndexSynchronizer, LocationQueryService, EntityAccessService, ComponentAccessService, LocationDisplayService, GraphIntegrityValidator, AnatomyQueryCache, RecipeProcessor, PartSelectionService, SocketManager, EntityGraphBuilder, RecipeConstraintEvaluator, BodyBlueprintFactory, BodyGraphService, JsonLogicCustomOperators, JsonLogicEvaluationService, AnatomyFormattingService, DescriptorFormatter, BodyPartDescriptionBuilder, BodyDescriptionComposer, PartDescriptionGenerator, DescriptionPersistenceService, BodyDescriptionOrchestrator, AnatomyDescriptionService, AnatomyGenerationService, LayerCompatibilityService, ClothingSlotValidator, EquipmentOrchestrator, LayerResolutionService, IAnatomySocketIndex, IAnatomyBlueprintRepository, AnatomyClothingCache, SlotResolver, ClothingManagementService, EquipmentDescriptionService, ClothingInstantiationService, ClothingInstantiationServiceV2, AnatomyInitializationService, IPipelineServiceFactory, IPipelineServiceRegistry, ITargetDependencyResolver, ILegacyTargetCompatibilityLayer, IScopeContextBuilder, ITargetDisplayNameResolver, IScopeRegistry, ActionIndex, IScopeCacheStrategy, IUnifiedScopeResolver, ITargetContextBuilder, IMultiTargetResolutionStage, ITargetResolutionService, TraceContextFactory, IFixSuggestionEngine, IActionErrorContextBuilder, ActionCandidateProcessor, ActionPipelineOrchestrator, IActionDiscoveryService, ActionValidationContextBuilder, PrerequisiteEvaluationService, IActionExecutionTraceFactory, ICommandProcessor, UnifiedErrorHandler, DirectiveStrategyResolver, CommandDispatcher, DirectiveExecutor, ResultInterpreter, ICommandOutcomeInterpreter, DispatchEventHandler, DispatchPerceptibleEventHandler, DispatchSpeechHandler, DispatchThoughtHandler, LogHandler, ModifyComponentHandler, AddComponentHandler, RemoveComponentHandler, QueryComponentHandler, QueryComponentsHandler, SetVariableHandler, EndTurnHandler, SystemMoveEntityHandler, IMoveEntityHandler, GetTimestampHandler, GetNameHandler, RebuildLeaderListCacheHandler, CheckFollowCycleHandler, EstablishFollowRelationHandler, BreakFollowRelationHandler, AddPerceptionLogEntryHandler, QueryEntitiesHandler, HasComponentHandler, ModifyArrayFieldHandler, ModifyContextArrayHandler, IfCoLocatedHandler, MathHandler, AutoMoveFollowersHandler, MergeClosenessCircleHandler, RemoveFromClosenessCircleHandler, EstablishSittingClosenessHandler, RemoveSittingClosenessHandler, HasBodyPartWithComponentValueHandler, UnequipClothingHandler, LockMovementHandler, LockMouthEngagementHandler, UnlockMovementHandler, UnlockMouthEngagementHandler, RegenerateDescriptionHandler, AtomicModifyComponentHandler, SequenceHandler, OperationRegistry, OperationInterpreter, ActionSequence, SystemLogicInterpreter, IHttpClient, LlmConfigLoader, ILLMConfigurationManager, ILLMRequestExecutor, ILLMErrorMapper, ITokenEstimator, LLMAdapter, LlmJsonService, CharacterDatabase, CharacterStorageService, ThematicDirectionGenerator, ClicheGenerator, CoreMotivationsGenerator, CoreMotivationsDisplayEnhancer, TraitsGenerator, TraitsDisplayEnhancer, SpeechPatternsResponseProcessor, SpeechPatternsGenerator, SpeechPatternsDisplayEnhancer, TraitsRewriterGenerator, TraitsRewriterResponseProcessor, TraitsRewriterDisplayEnhancer, CharacterBuilderService, ICharacterBuilderService, IPromptOutputPort, ITurnEndPort, IActionCategorizationService, WorldInitializer, SystemInitializer]

      119 |           error
      120 |         );
    > 121 |         throw new Error(
          |               ^
      122 |           `Failed to create instance for "${registrationKey}" (lifecycle: ${lifecycle}): ${error.message}`,
      123 |           { cause: error }
      124 |         );

      at AppContainer.resolve (src/dependencyInjection/appContainer.js:121:15)
      at resolve (src/dependencyInjection/registrations/loadersRegistrations.js:377:22)
      at AppContainer.factoryFn [as _invokeFactory] (src/dependencyInjection/appContainer.js:249:12)
      at AppContainer._invokeFactory [as _createInstance] (src/dependencyInjection/appContainer.js:190:19)
      at AppContainer._createInstance [as resolve] (src/dependencyInjection/appContainer.js:109:31)
      at resolve (src/dependencyInjection/registrations/loadersRegistrations.js:433:25)
      at AppContainer.factoryFn [as _invokeFactory] (src/dependencyInjection/appContainer.js:249:12)
      at AppContainer._invokeFactory [as _createInstance] (src/dependencyInjection/appContainer.js:190:19)
      at AppContainer._createInstance [as resolve] (src/dependencyInjection/appContainer.js:109:31)
      at CharacterBuilderBootstrap.resolve (src/characterBuilder/CharacterBuilderBootstrap.js:761:34)
      at CharacterBuilderBootstrap.bootstrap (src/characterBuilder/CharacterBuilderBootstrap.js:103:29)
      at Object.<anonymous> (tests/integration/characterBuilder/speechPatternsGeneratorRuntimeErrors.integration.test.js:95:7)

    Cause:
    AppContainer: No service registered for key "IModValidationOrchestrator". Known keys: [ILogger, ProxyUrl, IConfiguration, IPathResolver, ISchemaValidator, IDataRegistry, IDataFetcher, ITextDataFetcher, RuleLoader, ComponentLoader, ConditionLoader, ActionLoader, EventLoader, MacroLoader, EntityLoader, EntityInstanceLoader, WorldLoader, GoalLoader, AnatomyRecipeLoader, AnatomyBlueprintLoader, AnatomyBlueprintPartLoader, AnatomySlotLibraryLoader, AnatomyFormattingLoader, ScopeLoader, ModManifestLoader, GameConfigLoader, PromptTextLoader, ModLoadOrderResolver, ModManifestProcessor, ContentLoadManager, WorldLoadSummaryLogger, SchemaPhase, GameConfigPhase, ManifestPhase, ContentPhase, WorldPhase, SummaryPhase, ILoadCache, ModsLoader, SchemaLoader, ServiceSetup, IPathConfiguration, ITraceConfigLoader, ActionIndexingService, EventBus, IEventBus, ISpatialIndexManager, IGameDataRepository, IValidatedEventDispatcher, ISafeEventDispatcher, EventDispatchService, ScopeEngine, DslParser, IScopeEngine, IScopeDslErrorFactory, IScopeDslErrorHandler, ICriticalLogNotifier, CriticalLogNotifier, IActionTraceConfigValidator, IActionTraceConfigLoader, ITraceDirectoryManager, IIndexedDBStorageAdapter, IActionTraceFilter, IJsonTraceFormatter, IHumanReadableFormatter, IActionTraceOutputService, IActionAwareStructuredTrace, IEventDispatchTracer, IErrorMetrics, IRetryManager, IRecoveryManager, ITraceErrorHandler, ITracingConfigurationInitializer, IStorageProvider, ISaveFileRepository, ISaveLoadService, PlaytimeTracker, ComponentCleaningService, SaveMetadataBuilder, ActiveModsManifestBuilder, GameStateCaptureService, ManualSaveCoordinator, GamePersistenceService, IEntityManager, IWorldContext, ClosenessCircleService, EntityDisplayDataProvider, SpatialIndexSynchronizer, LocationQueryService, EntityAccessService, ComponentAccessService, LocationDisplayService, GraphIntegrityValidator, AnatomyQueryCache, RecipeProcessor, PartSelectionService, SocketManager, EntityGraphBuilder, RecipeConstraintEvaluator, BodyBlueprintFactory, BodyGraphService, JsonLogicCustomOperators, JsonLogicEvaluationService, AnatomyFormattingService, DescriptorFormatter, BodyPartDescriptionBuilder, BodyDescriptionComposer, PartDescriptionGenerator, DescriptionPersistenceService, BodyDescriptionOrchestrator, AnatomyDescriptionService, AnatomyGenerationService, LayerCompatibilityService, ClothingSlotValidator, EquipmentOrchestrator, LayerResolutionService, IAnatomySocketIndex, IAnatomyBlueprintRepository, AnatomyClothingCache, SlotResolver, ClothingManagementService, EquipmentDescriptionService, ClothingInstantiationService, ClothingInstantiationServiceV2, AnatomyInitializationService, IPipelineServiceFactory, IPipelineServiceRegistry, ITargetDependencyResolver, ILegacyTargetCompatibilityLayer, IScopeContextBuilder, ITargetDisplayNameResolver, IScopeRegistry, ActionIndex, IScopeCacheStrategy, IUnifiedScopeResolver, ITargetContextBuilder, IMultiTargetResolutionStage, ITargetResolutionService, TraceContextFactory, IFixSuggestionEngine, IActionErrorContextBuilder, ActionCandidateProcessor, ActionPipelineOrchestrator, IActionDiscoveryService, ActionValidationContextBuilder, PrerequisiteEvaluationService, IActionExecutionTraceFactory, ICommandProcessor, UnifiedErrorHandler, DirectiveStrategyResolver, CommandDispatcher, DirectiveExecutor, ResultInterpreter, ICommandOutcomeInterpreter, DispatchEventHandler, DispatchPerceptibleEventHandler, DispatchSpeechHandler, DispatchThoughtHandler, LogHandler, ModifyComponentHandler, AddComponentHandler, RemoveComponentHandler, QueryComponentHandler, QueryComponentsHandler, SetVariableHandler, EndTurnHandler, SystemMoveEntityHandler, IMoveEntityHandler, GetTimestampHandler, GetNameHandler, RebuildLeaderListCacheHandler, CheckFollowCycleHandler, EstablishFollowRelationHandler, BreakFollowRelationHandler, AddPerceptionLogEntryHandler, QueryEntitiesHandler, HasComponentHandler, ModifyArrayFieldHandler, ModifyContextArrayHandler, IfCoLocatedHandler, MathHandler, AutoMoveFollowersHandler, MergeClosenessCircleHandler, RemoveFromClosenessCircleHandler, EstablishSittingClosenessHandler, RemoveSittingClosenessHandler, HasBodyPartWithComponentValueHandler, UnequipClothingHandler, LockMovementHandler, LockMouthEngagementHandler, UnlockMovementHandler, UnlockMouthEngagementHandler, RegenerateDescriptionHandler, AtomicModifyComponentHandler, SequenceHandler, OperationRegistry, OperationInterpreter, ActionSequence, SystemLogicInterpreter, IHttpClient, LlmConfigLoader, ILLMConfigurationManager, ILLMRequestExecutor, ILLMErrorMapper, ITokenEstimator, LLMAdapter, LlmJsonService, CharacterDatabase, CharacterStorageService, ThematicDirectionGenerator, ClicheGenerator, CoreMotivationsGenerator, CoreMotivationsDisplayEnhancer, TraitsGenerator, TraitsDisplayEnhancer, SpeechPatternsResponseProcessor, SpeechPatternsGenerator, SpeechPatternsDisplayEnhancer, TraitsRewriterGenerator, TraitsRewriterResponseProcessor, TraitsRewriterDisplayEnhancer, CharacterBuilderService, ICharacterBuilderService, IPromptOutputPort, ITurnEndPort, IActionCategorizationService, WorldInitializer, SystemInitializer]

      94 |     if (!registration) {
      95 |       const knownKeys = Array.from(this.#registrations.keys()).join(', ');
    > 96 |       throw new Error(
         |             ^
      97 |         `AppContainer: No service registered for key "${registrationKey}". Known keys: [${knownKeys}]`
      98 |       );
      99 |     }

      at AppContainer.resolve (src/dependencyInjection/appContainer.js:96:13)
      at resolve (src/dependencyInjection/registrations/loadersRegistrations.js:314:36)
      at AppContainer.factoryFn [as _invokeFactory] (src/dependencyInjection/appContainer.js:249:12)
      at AppContainer._invokeFactory [as _createInstance] (src/dependencyInjection/appContainer.js:190:19)
      at AppContainer._createInstance [as resolve] (src/dependencyInjection/appContainer.js:109:31)
      at resolve (src/dependencyInjection/registrations/loadersRegistrations.js:377:22)
      at AppContainer.factoryFn [as _invokeFactory] (src/dependencyInjection/appContainer.js:249:12)
      at AppContainer._invokeFactory [as _createInstance] (src/dependencyInjection/appContainer.js:190:19)
      at AppContainer._createInstance [as resolve] (src/dependencyInjection/appContainer.js:109:31)
      at resolve (src/dependencyInjection/registrations/loadersRegistrations.js:433:25)
      at AppContainer.factoryFn [as _invokeFactory] (src/dependencyInjection/appContainer.js:249:12)
      at AppContainer._invokeFactory [as _createInstance] (src/dependencyInjection/appContainer.js:190:19)
      at AppContainer._createInstance [as resolve] (src/dependencyInjection/appContainer.js:109:31)
      at CharacterBuilderBootstrap.resolve (src/characterBuilder/CharacterBuilderBootstrap.js:761:34)
      at CharacterBuilderBootstrap.bootstrap (src/characterBuilder/CharacterBuilderBootstrap.js:103:29)
      at Object.<anonymous> (tests/integration/characterBuilder/speechPatternsGeneratorRuntimeErrors.integration.test.js:95:7)

  ● SpeechPatternsGeneratorController - Runtime Errors › Service Registration › should work with a properly registered mock service

    Failed to create instance for "ModsLoader" (lifecycle: singletonFactory): Failed to create instance for "ManifestPhase" (lifecycle: singletonFactory): Failed to create instance for "ModManifestProcessor" (lifecycle: singletonFactory): AppContainer: No service registered for key "IModValidationOrchestrator". Known keys: [ILogger, ProxyUrl, IConfiguration, IPathResolver, ISchemaValidator, IDataRegistry, IDataFetcher, ITextDataFetcher, RuleLoader, ComponentLoader, ConditionLoader, ActionLoader, EventLoader, MacroLoader, EntityLoader, EntityInstanceLoader, WorldLoader, GoalLoader, AnatomyRecipeLoader, AnatomyBlueprintLoader, AnatomyBlueprintPartLoader, AnatomySlotLibraryLoader, AnatomyFormattingLoader, ScopeLoader, ModManifestLoader, GameConfigLoader, PromptTextLoader, ModLoadOrderResolver, ModManifestProcessor, ContentLoadManager, WorldLoadSummaryLogger, SchemaPhase, GameConfigPhase, ManifestPhase, ContentPhase, WorldPhase, SummaryPhase, ILoadCache, ModsLoader, SchemaLoader, ServiceSetup, IPathConfiguration, ITraceConfigLoader, ActionIndexingService, EventBus, IEventBus, ISpatialIndexManager, IGameDataRepository, IValidatedEventDispatcher, ISafeEventDispatcher, EventDispatchService, ScopeEngine, DslParser, IScopeEngine, IScopeDslErrorFactory, IScopeDslErrorHandler, ICriticalLogNotifier, CriticalLogNotifier, IActionTraceConfigValidator, IActionTraceConfigLoader, ITraceDirectoryManager, IIndexedDBStorageAdapter, IActionTraceFilter, IJsonTraceFormatter, IHumanReadableFormatter, IActionTraceOutputService, IActionAwareStructuredTrace, IEventDispatchTracer, IErrorMetrics, IRetryManager, IRecoveryManager, ITraceErrorHandler, ITracingConfigurationInitializer, IStorageProvider, ISaveFileRepository, ISaveLoadService, PlaytimeTracker, ComponentCleaningService, SaveMetadataBuilder, ActiveModsManifestBuilder, GameStateCaptureService, ManualSaveCoordinator, GamePersistenceService, IEntityManager, IWorldContext, ClosenessCircleService, EntityDisplayDataProvider, SpatialIndexSynchronizer, LocationQueryService, EntityAccessService, ComponentAccessService, LocationDisplayService, GraphIntegrityValidator, AnatomyQueryCache, RecipeProcessor, PartSelectionService, SocketManager, EntityGraphBuilder, RecipeConstraintEvaluator, BodyBlueprintFactory, BodyGraphService, JsonLogicCustomOperators, JsonLogicEvaluationService, AnatomyFormattingService, DescriptorFormatter, BodyPartDescriptionBuilder, BodyDescriptionComposer, PartDescriptionGenerator, DescriptionPersistenceService, BodyDescriptionOrchestrator, AnatomyDescriptionService, AnatomyGenerationService, LayerCompatibilityService, ClothingSlotValidator, EquipmentOrchestrator, LayerResolutionService, IAnatomySocketIndex, IAnatomyBlueprintRepository, AnatomyClothingCache, SlotResolver, ClothingManagementService, EquipmentDescriptionService, ClothingInstantiationService, ClothingInstantiationServiceV2, AnatomyInitializationService, IPipelineServiceFactory, IPipelineServiceRegistry, ITargetDependencyResolver, ILegacyTargetCompatibilityLayer, IScopeContextBuilder, ITargetDisplayNameResolver, IScopeRegistry, ActionIndex, IScopeCacheStrategy, IUnifiedScopeResolver, ITargetContextBuilder, IMultiTargetResolutionStage, ITargetResolutionService, TraceContextFactory, IFixSuggestionEngine, IActionErrorContextBuilder, ActionCandidateProcessor, ActionPipelineOrchestrator, IActionDiscoveryService, ActionValidationContextBuilder, PrerequisiteEvaluationService, IActionExecutionTraceFactory, ICommandProcessor, UnifiedErrorHandler, DirectiveStrategyResolver, CommandDispatcher, DirectiveExecutor, ResultInterpreter, ICommandOutcomeInterpreter, DispatchEventHandler, DispatchPerceptibleEventHandler, DispatchSpeechHandler, DispatchThoughtHandler, LogHandler, ModifyComponentHandler, AddComponentHandler, RemoveComponentHandler, QueryComponentHandler, QueryComponentsHandler, SetVariableHandler, EndTurnHandler, SystemMoveEntityHandler, IMoveEntityHandler, GetTimestampHandler, GetNameHandler, RebuildLeaderListCacheHandler, CheckFollowCycleHandler, EstablishFollowRelationHandler, BreakFollowRelationHandler, AddPerceptionLogEntryHandler, QueryEntitiesHandler, HasComponentHandler, ModifyArrayFieldHandler, ModifyContextArrayHandler, IfCoLocatedHandler, MathHandler, AutoMoveFollowersHandler, MergeClosenessCircleHandler, RemoveFromClosenessCircleHandler, EstablishSittingClosenessHandler, RemoveSittingClosenessHandler, HasBodyPartWithComponentValueHandler, UnequipClothingHandler, LockMovementHandler, LockMouthEngagementHandler, UnlockMovementHandler, UnlockMouthEngagementHandler, RegenerateDescriptionHandler, AtomicModifyComponentHandler, SequenceHandler, OperationRegistry, OperationInterpreter, ActionSequence, SystemLogicInterpreter, IHttpClient, LlmConfigLoader, ILLMConfigurationManager, ILLMRequestExecutor, ILLMErrorMapper, ITokenEstimator, LLMAdapter, LlmJsonService, CharacterDatabase, CharacterStorageService, ThematicDirectionGenerator, ClicheGenerator, CoreMotivationsGenerator, CoreMotivationsDisplayEnhancer, TraitsGenerator, TraitsDisplayEnhancer, SpeechPatternsResponseProcessor, SpeechPatternsGenerator, SpeechPatternsDisplayEnhancer, TraitsRewriterGenerator, TraitsRewriterResponseProcessor, TraitsRewriterDisplayEnhancer, CharacterBuilderService, ICharacterBuilderService, IPromptOutputPort, ITurnEndPort, IActionCategorizationService, WorldInitializer, SystemInitializer]

      119 |           error
      120 |         );
    > 121 |         throw new Error(
          |               ^
      122 |           `Failed to create instance for "${registrationKey}" (lifecycle: ${lifecycle}): ${error.message}`,
      123 |           { cause: error }
      124 |         );

      at AppContainer.resolve (src/dependencyInjection/appContainer.js:121:15)
      at CharacterBuilderBootstrap.resolve (src/characterBuilder/CharacterBuilderBootstrap.js:761:34)
      at CharacterBuilderBootstrap.bootstrap (src/characterBuilder/CharacterBuilderBootstrap.js:103:29)
      at Object.<anonymous> (tests/integration/characterBuilder/speechPatternsGeneratorRuntimeErrors.integration.test.js:163:7)

    Cause:
    Failed to create instance for "ManifestPhase" (lifecycle: singletonFactory): Failed to create instance for "ModManifestProcessor" (lifecycle: singletonFactory): AppContainer: No service registered for key "IModValidationOrchestrator". Known keys: [ILogger, ProxyUrl, IConfiguration, IPathResolver, ISchemaValidator, IDataRegistry, IDataFetcher, ITextDataFetcher, RuleLoader, ComponentLoader, ConditionLoader, ActionLoader, EventLoader, MacroLoader, EntityLoader, EntityInstanceLoader, WorldLoader, GoalLoader, AnatomyRecipeLoader, AnatomyBlueprintLoader, AnatomyBlueprintPartLoader, AnatomySlotLibraryLoader, AnatomyFormattingLoader, ScopeLoader, ModManifestLoader, GameConfigLoader, PromptTextLoader, ModLoadOrderResolver, ModManifestProcessor, ContentLoadManager, WorldLoadSummaryLogger, SchemaPhase, GameConfigPhase, ManifestPhase, ContentPhase, WorldPhase, SummaryPhase, ILoadCache, ModsLoader, SchemaLoader, ServiceSetup, IPathConfiguration, ITraceConfigLoader, ActionIndexingService, EventBus, IEventBus, ISpatialIndexManager, IGameDataRepository, IValidatedEventDispatcher, ISafeEventDispatcher, EventDispatchService, ScopeEngine, DslParser, IScopeEngine, IScopeDslErrorFactory, IScopeDslErrorHandler, ICriticalLogNotifier, CriticalLogNotifier, IActionTraceConfigValidator, IActionTraceConfigLoader, ITraceDirectoryManager, IIndexedDBStorageAdapter, IActionTraceFilter, IJsonTraceFormatter, IHumanReadableFormatter, IActionTraceOutputService, IActionAwareStructuredTrace, IEventDispatchTracer, IErrorMetrics, IRetryManager, IRecoveryManager, ITraceErrorHandler, ITracingConfigurationInitializer, IStorageProvider, ISaveFileRepository, ISaveLoadService, PlaytimeTracker, ComponentCleaningService, SaveMetadataBuilder, ActiveModsManifestBuilder, GameStateCaptureService, ManualSaveCoordinator, GamePersistenceService, IEntityManager, IWorldContext, ClosenessCircleService, EntityDisplayDataProvider, SpatialIndexSynchronizer, LocationQueryService, EntityAccessService, ComponentAccessService, LocationDisplayService, GraphIntegrityValidator, AnatomyQueryCache, RecipeProcessor, PartSelectionService, SocketManager, EntityGraphBuilder, RecipeConstraintEvaluator, BodyBlueprintFactory, BodyGraphService, JsonLogicCustomOperators, JsonLogicEvaluationService, AnatomyFormattingService, DescriptorFormatter, BodyPartDescriptionBuilder, BodyDescriptionComposer, PartDescriptionGenerator, DescriptionPersistenceService, BodyDescriptionOrchestrator, AnatomyDescriptionService, AnatomyGenerationService, LayerCompatibilityService, ClothingSlotValidator, EquipmentOrchestrator, LayerResolutionService, IAnatomySocketIndex, IAnatomyBlueprintRepository, AnatomyClothingCache, SlotResolver, ClothingManagementService, EquipmentDescriptionService, ClothingInstantiationService, ClothingInstantiationServiceV2, AnatomyInitializationService, IPipelineServiceFactory, IPipelineServiceRegistry, ITargetDependencyResolver, ILegacyTargetCompatibilityLayer, IScopeContextBuilder, ITargetDisplayNameResolver, IScopeRegistry, ActionIndex, IScopeCacheStrategy, IUnifiedScopeResolver, ITargetContextBuilder, IMultiTargetResolutionStage, ITargetResolutionService, TraceContextFactory, IFixSuggestionEngine, IActionErrorContextBuilder, ActionCandidateProcessor, ActionPipelineOrchestrator, IActionDiscoveryService, ActionValidationContextBuilder, PrerequisiteEvaluationService, IActionExecutionTraceFactory, ICommandProcessor, UnifiedErrorHandler, DirectiveStrategyResolver, CommandDispatcher, DirectiveExecutor, ResultInterpreter, ICommandOutcomeInterpreter, DispatchEventHandler, DispatchPerceptibleEventHandler, DispatchSpeechHandler, DispatchThoughtHandler, LogHandler, ModifyComponentHandler, AddComponentHandler, RemoveComponentHandler, QueryComponentHandler, QueryComponentsHandler, SetVariableHandler, EndTurnHandler, SystemMoveEntityHandler, IMoveEntityHandler, GetTimestampHandler, GetNameHandler, RebuildLeaderListCacheHandler, CheckFollowCycleHandler, EstablishFollowRelationHandler, BreakFollowRelationHandler, AddPerceptionLogEntryHandler, QueryEntitiesHandler, HasComponentHandler, ModifyArrayFieldHandler, ModifyContextArrayHandler, IfCoLocatedHandler, MathHandler, AutoMoveFollowersHandler, MergeClosenessCircleHandler, RemoveFromClosenessCircleHandler, EstablishSittingClosenessHandler, RemoveSittingClosenessHandler, HasBodyPartWithComponentValueHandler, UnequipClothingHandler, LockMovementHandler, LockMouthEngagementHandler, UnlockMovementHandler, UnlockMouthEngagementHandler, RegenerateDescriptionHandler, AtomicModifyComponentHandler, SequenceHandler, OperationRegistry, OperationInterpreter, ActionSequence, SystemLogicInterpreter, IHttpClient, LlmConfigLoader, ILLMConfigurationManager, ILLMRequestExecutor, ILLMErrorMapper, ITokenEstimator, LLMAdapter, LlmJsonService, CharacterDatabase, CharacterStorageService, ThematicDirectionGenerator, ClicheGenerator, CoreMotivationsGenerator, CoreMotivationsDisplayEnhancer, TraitsGenerator, TraitsDisplayEnhancer, SpeechPatternsResponseProcessor, SpeechPatternsGenerator, SpeechPatternsDisplayEnhancer, TraitsRewriterGenerator, TraitsRewriterResponseProcessor, TraitsRewriterDisplayEnhancer, CharacterBuilderService, ICharacterBuilderService, IPromptOutputPort, ITurnEndPort, IActionCategorizationService, WorldInitializer, SystemInitializer]

      119 |           error
      120 |         );
    > 121 |         throw new Error(
          |               ^
      122 |           `Failed to create instance for "${registrationKey}" (lifecycle: ${lifecycle}): ${error.message}`,
      123 |           { cause: error }
      124 |         );

      at AppContainer.resolve (src/dependencyInjection/appContainer.js:121:15)
      at resolve (src/dependencyInjection/registrations/loadersRegistrations.js:433:25)
      at AppContainer.factoryFn [as _invokeFactory] (src/dependencyInjection/appContainer.js:249:12)
      at AppContainer._invokeFactory [as _createInstance] (src/dependencyInjection/appContainer.js:190:19)
      at AppContainer._createInstance [as resolve] (src/dependencyInjection/appContainer.js:109:31)
      at CharacterBuilderBootstrap.resolve (src/characterBuilder/CharacterBuilderBootstrap.js:761:34)
      at CharacterBuilderBootstrap.bootstrap (src/characterBuilder/CharacterBuilderBootstrap.js:103:29)
      at Object.<anonymous> (tests/integration/characterBuilder/speechPatternsGeneratorRuntimeErrors.integration.test.js:163:7)

    Cause:
    Failed to create instance for "ModManifestProcessor" (lifecycle: singletonFactory): AppContainer: No service registered for key "IModValidationOrchestrator". Known keys: [ILogger, ProxyUrl, IConfiguration, IPathResolver, ISchemaValidator, IDataRegistry, IDataFetcher, ITextDataFetcher, RuleLoader, ComponentLoader, ConditionLoader, ActionLoader, EventLoader, MacroLoader, EntityLoader, EntityInstanceLoader, WorldLoader, GoalLoader, AnatomyRecipeLoader, AnatomyBlueprintLoader, AnatomyBlueprintPartLoader, AnatomySlotLibraryLoader, AnatomyFormattingLoader, ScopeLoader, ModManifestLoader, GameConfigLoader, PromptTextLoader, ModLoadOrderResolver, ModManifestProcessor, ContentLoadManager, WorldLoadSummaryLogger, SchemaPhase, GameConfigPhase, ManifestPhase, ContentPhase, WorldPhase, SummaryPhase, ILoadCache, ModsLoader, SchemaLoader, ServiceSetup, IPathConfiguration, ITraceConfigLoader, ActionIndexingService, EventBus, IEventBus, ISpatialIndexManager, IGameDataRepository, IValidatedEventDispatcher, ISafeEventDispatcher, EventDispatchService, ScopeEngine, DslParser, IScopeEngine, IScopeDslErrorFactory, IScopeDslErrorHandler, ICriticalLogNotifier, CriticalLogNotifier, IActionTraceConfigValidator, IActionTraceConfigLoader, ITraceDirectoryManager, IIndexedDBStorageAdapter, IActionTraceFilter, IJsonTraceFormatter, IHumanReadableFormatter, IActionTraceOutputService, IActionAwareStructuredTrace, IEventDispatchTracer, IErrorMetrics, IRetryManager, IRecoveryManager, ITraceErrorHandler, ITracingConfigurationInitializer, IStorageProvider, ISaveFileRepository, ISaveLoadService, PlaytimeTracker, ComponentCleaningService, SaveMetadataBuilder, ActiveModsManifestBuilder, GameStateCaptureService, ManualSaveCoordinator, GamePersistenceService, IEntityManager, IWorldContext, ClosenessCircleService, EntityDisplayDataProvider, SpatialIndexSynchronizer, LocationQueryService, EntityAccessService, ComponentAccessService, LocationDisplayService, GraphIntegrityValidator, AnatomyQueryCache, RecipeProcessor, PartSelectionService, SocketManager, EntityGraphBuilder, RecipeConstraintEvaluator, BodyBlueprintFactory, BodyGraphService, JsonLogicCustomOperators, JsonLogicEvaluationService, AnatomyFormattingService, DescriptorFormatter, BodyPartDescriptionBuilder, BodyDescriptionComposer, PartDescriptionGenerator, DescriptionPersistenceService, BodyDescriptionOrchestrator, AnatomyDescriptionService, AnatomyGenerationService, LayerCompatibilityService, ClothingSlotValidator, EquipmentOrchestrator, LayerResolutionService, IAnatomySocketIndex, IAnatomyBlueprintRepository, AnatomyClothingCache, SlotResolver, ClothingManagementService, EquipmentDescriptionService, ClothingInstantiationService, ClothingInstantiationServiceV2, AnatomyInitializationService, IPipelineServiceFactory, IPipelineServiceRegistry, ITargetDependencyResolver, ILegacyTargetCompatibilityLayer, IScopeContextBuilder, ITargetDisplayNameResolver, IScopeRegistry, ActionIndex, IScopeCacheStrategy, IUnifiedScopeResolver, ITargetContextBuilder, IMultiTargetResolutionStage, ITargetResolutionService, TraceContextFactory, IFixSuggestionEngine, IActionErrorContextBuilder, ActionCandidateProcessor, ActionPipelineOrchestrator, IActionDiscoveryService, ActionValidationContextBuilder, PrerequisiteEvaluationService, IActionExecutionTraceFactory, ICommandProcessor, UnifiedErrorHandler, DirectiveStrategyResolver, CommandDispatcher, DirectiveExecutor, ResultInterpreter, ICommandOutcomeInterpreter, DispatchEventHandler, DispatchPerceptibleEventHandler, DispatchSpeechHandler, DispatchThoughtHandler, LogHandler, ModifyComponentHandler, AddComponentHandler, RemoveComponentHandler, QueryComponentHandler, QueryComponentsHandler, SetVariableHandler, EndTurnHandler, SystemMoveEntityHandler, IMoveEntityHandler, GetTimestampHandler, GetNameHandler, RebuildLeaderListCacheHandler, CheckFollowCycleHandler, EstablishFollowRelationHandler, BreakFollowRelationHandler, AddPerceptionLogEntryHandler, QueryEntitiesHandler, HasComponentHandler, ModifyArrayFieldHandler, ModifyContextArrayHandler, IfCoLocatedHandler, MathHandler, AutoMoveFollowersHandler, MergeClosenessCircleHandler, RemoveFromClosenessCircleHandler, EstablishSittingClosenessHandler, RemoveSittingClosenessHandler, HasBodyPartWithComponentValueHandler, UnequipClothingHandler, LockMovementHandler, LockMouthEngagementHandler, UnlockMovementHandler, UnlockMouthEngagementHandler, RegenerateDescriptionHandler, AtomicModifyComponentHandler, SequenceHandler, OperationRegistry, OperationInterpreter, ActionSequence, SystemLogicInterpreter, IHttpClient, LlmConfigLoader, ILLMConfigurationManager, ILLMRequestExecutor, ILLMErrorMapper, ITokenEstimator, LLMAdapter, LlmJsonService, CharacterDatabase, CharacterStorageService, ThematicDirectionGenerator, ClicheGenerator, CoreMotivationsGenerator, CoreMotivationsDisplayEnhancer, TraitsGenerator, TraitsDisplayEnhancer, SpeechPatternsResponseProcessor, SpeechPatternsGenerator, SpeechPatternsDisplayEnhancer, TraitsRewriterGenerator, TraitsRewriterResponseProcessor, TraitsRewriterDisplayEnhancer, CharacterBuilderService, ICharacterBuilderService, IPromptOutputPort, ITurnEndPort, IActionCategorizationService, WorldInitializer, SystemInitializer]

      119 |           error
      120 |         );
    > 121 |         throw new Error(
          |               ^
      122 |           `Failed to create instance for "${registrationKey}" (lifecycle: ${lifecycle}): ${error.message}`,
      123 |           { cause: error }
      124 |         );

      at AppContainer.resolve (src/dependencyInjection/appContainer.js:121:15)
      at resolve (src/dependencyInjection/registrations/loadersRegistrations.js:377:22)
      at AppContainer.factoryFn [as _invokeFactory] (src/dependencyInjection/appContainer.js:249:12)
      at AppContainer._invokeFactory [as _createInstance] (src/dependencyInjection/appContainer.js:190:19)
      at AppContainer._createInstance [as resolve] (src/dependencyInjection/appContainer.js:109:31)
      at resolve (src/dependencyInjection/registrations/loadersRegistrations.js:433:25)
      at AppContainer.factoryFn [as _invokeFactory] (src/dependencyInjection/appContainer.js:249:12)
      at AppContainer._invokeFactory [as _createInstance] (src/dependencyInjection/appContainer.js:190:19)
      at AppContainer._createInstance [as resolve] (src/dependencyInjection/appContainer.js:109:31)
      at CharacterBuilderBootstrap.resolve (src/characterBuilder/CharacterBuilderBootstrap.js:761:34)
      at CharacterBuilderBootstrap.bootstrap (src/characterBuilder/CharacterBuilderBootstrap.js:103:29)
      at Object.<anonymous> (tests/integration/characterBuilder/speechPatternsGeneratorRuntimeErrors.integration.test.js:163:7)

    Cause:
    AppContainer: No service registered for key "IModValidationOrchestrator". Known keys: [ILogger, ProxyUrl, IConfiguration, IPathResolver, ISchemaValidator, IDataRegistry, IDataFetcher, ITextDataFetcher, RuleLoader, ComponentLoader, ConditionLoader, ActionLoader, EventLoader, MacroLoader, EntityLoader, EntityInstanceLoader, WorldLoader, GoalLoader, AnatomyRecipeLoader, AnatomyBlueprintLoader, AnatomyBlueprintPartLoader, AnatomySlotLibraryLoader, AnatomyFormattingLoader, ScopeLoader, ModManifestLoader, GameConfigLoader, PromptTextLoader, ModLoadOrderResolver, ModManifestProcessor, ContentLoadManager, WorldLoadSummaryLogger, SchemaPhase, GameConfigPhase, ManifestPhase, ContentPhase, WorldPhase, SummaryPhase, ILoadCache, ModsLoader, SchemaLoader, ServiceSetup, IPathConfiguration, ITraceConfigLoader, ActionIndexingService, EventBus, IEventBus, ISpatialIndexManager, IGameDataRepository, IValidatedEventDispatcher, ISafeEventDispatcher, EventDispatchService, ScopeEngine, DslParser, IScopeEngine, IScopeDslErrorFactory, IScopeDslErrorHandler, ICriticalLogNotifier, CriticalLogNotifier, IActionTraceConfigValidator, IActionTraceConfigLoader, ITraceDirectoryManager, IIndexedDBStorageAdapter, IActionTraceFilter, IJsonTraceFormatter, IHumanReadableFormatter, IActionTraceOutputService, IActionAwareStructuredTrace, IEventDispatchTracer, IErrorMetrics, IRetryManager, IRecoveryManager, ITraceErrorHandler, ITracingConfigurationInitializer, IStorageProvider, ISaveFileRepository, ISaveLoadService, PlaytimeTracker, ComponentCleaningService, SaveMetadataBuilder, ActiveModsManifestBuilder, GameStateCaptureService, ManualSaveCoordinator, GamePersistenceService, IEntityManager, IWorldContext, ClosenessCircleService, EntityDisplayDataProvider, SpatialIndexSynchronizer, LocationQueryService, EntityAccessService, ComponentAccessService, LocationDisplayService, GraphIntegrityValidator, AnatomyQueryCache, RecipeProcessor, PartSelectionService, SocketManager, EntityGraphBuilder, RecipeConstraintEvaluator, BodyBlueprintFactory, BodyGraphService, JsonLogicCustomOperators, JsonLogicEvaluationService, AnatomyFormattingService, DescriptorFormatter, BodyPartDescriptionBuilder, BodyDescriptionComposer, PartDescriptionGenerator, DescriptionPersistenceService, BodyDescriptionOrchestrator, AnatomyDescriptionService, AnatomyGenerationService, LayerCompatibilityService, ClothingSlotValidator, EquipmentOrchestrator, LayerResolutionService, IAnatomySocketIndex, IAnatomyBlueprintRepository, AnatomyClothingCache, SlotResolver, ClothingManagementService, EquipmentDescriptionService, ClothingInstantiationService, ClothingInstantiationServiceV2, AnatomyInitializationService, IPipelineServiceFactory, IPipelineServiceRegistry, ITargetDependencyResolver, ILegacyTargetCompatibilityLayer, IScopeContextBuilder, ITargetDisplayNameResolver, IScopeRegistry, ActionIndex, IScopeCacheStrategy, IUnifiedScopeResolver, ITargetContextBuilder, IMultiTargetResolutionStage, ITargetResolutionService, TraceContextFactory, IFixSuggestionEngine, IActionErrorContextBuilder, ActionCandidateProcessor, ActionPipelineOrchestrator, IActionDiscoveryService, ActionValidationContextBuilder, PrerequisiteEvaluationService, IActionExecutionTraceFactory, ICommandProcessor, UnifiedErrorHandler, DirectiveStrategyResolver, CommandDispatcher, DirectiveExecutor, ResultInterpreter, ICommandOutcomeInterpreter, DispatchEventHandler, DispatchPerceptibleEventHandler, DispatchSpeechHandler, DispatchThoughtHandler, LogHandler, ModifyComponentHandler, AddComponentHandler, RemoveComponentHandler, QueryComponentHandler, QueryComponentsHandler, SetVariableHandler, EndTurnHandler, SystemMoveEntityHandler, IMoveEntityHandler, GetTimestampHandler, GetNameHandler, RebuildLeaderListCacheHandler, CheckFollowCycleHandler, EstablishFollowRelationHandler, BreakFollowRelationHandler, AddPerceptionLogEntryHandler, QueryEntitiesHandler, HasComponentHandler, ModifyArrayFieldHandler, ModifyContextArrayHandler, IfCoLocatedHandler, MathHandler, AutoMoveFollowersHandler, MergeClosenessCircleHandler, RemoveFromClosenessCircleHandler, EstablishSittingClosenessHandler, RemoveSittingClosenessHandler, HasBodyPartWithComponentValueHandler, UnequipClothingHandler, LockMovementHandler, LockMouthEngagementHandler, UnlockMovementHandler, UnlockMouthEngagementHandler, RegenerateDescriptionHandler, AtomicModifyComponentHandler, SequenceHandler, OperationRegistry, OperationInterpreter, ActionSequence, SystemLogicInterpreter, IHttpClient, LlmConfigLoader, ILLMConfigurationManager, ILLMRequestExecutor, ILLMErrorMapper, ITokenEstimator, LLMAdapter, LlmJsonService, CharacterDatabase, CharacterStorageService, ThematicDirectionGenerator, ClicheGenerator, CoreMotivationsGenerator, CoreMotivationsDisplayEnhancer, TraitsGenerator, TraitsDisplayEnhancer, SpeechPatternsResponseProcessor, SpeechPatternsGenerator, SpeechPatternsDisplayEnhancer, TraitsRewriterGenerator, TraitsRewriterResponseProcessor, TraitsRewriterDisplayEnhancer, CharacterBuilderService, ICharacterBuilderService, IPromptOutputPort, ITurnEndPort, IActionCategorizationService, WorldInitializer, SystemInitializer]

      94 |     if (!registration) {
      95 |       const knownKeys = Array.from(this.#registrations.keys()).join(', ');
    > 96 |       throw new Error(
         |             ^
      97 |         `AppContainer: No service registered for key "${registrationKey}". Known keys: [${knownKeys}]`
      98 |       );
      99 |     }

      at AppContainer.resolve (src/dependencyInjection/appContainer.js:96:13)
      at resolve (src/dependencyInjection/registrations/loadersRegistrations.js:314:36)
      at AppContainer.factoryFn [as _invokeFactory] (src/dependencyInjection/appContainer.js:249:12)
      at AppContainer._invokeFactory [as _createInstance] (src/dependencyInjection/appContainer.js:190:19)
      at AppContainer._createInstance [as resolve] (src/dependencyInjection/appContainer.js:109:31)
      at resolve (src/dependencyInjection/registrations/loadersRegistrations.js:377:22)
      at AppContainer.factoryFn [as _invokeFactory] (src/dependencyInjection/appContainer.js:249:12)
      at AppContainer._invokeFactory [as _createInstance] (src/dependencyInjection/appContainer.js:190:19)
      at AppContainer._createInstance [as resolve] (src/dependencyInjection/appContainer.js:109:31)
      at resolve (src/dependencyInjection/registrations/loadersRegistrations.js:433:25)
      at AppContainer.factoryFn [as _invokeFactory] (src/dependencyInjection/appContainer.js:249:12)
      at AppContainer._invokeFactory [as _createInstance] (src/dependencyInjection/appContainer.js:190:19)
      at AppContainer._createInstance [as resolve] (src/dependencyInjection/appContainer.js:109:31)
      at CharacterBuilderBootstrap.resolve (src/characterBuilder/CharacterBuilderBootstrap.js:761:34)
      at CharacterBuilderBootstrap.bootstrap (src/characterBuilder/CharacterBuilderBootstrap.js:103:29)
      at Object.<anonymous> (tests/integration/characterBuilder/speechPatternsGeneratorRuntimeErrors.integration.test.js:163:7)

  ● SpeechPatternsGeneratorController - Runtime Errors › Event Definition Loading › should not have ui_state_changed warning when mods are loaded (our fix)

    Failed to create instance for "ModsLoader" (lifecycle: singletonFactory): Failed to create instance for "ManifestPhase" (lifecycle: singletonFactory): Failed to create instance for "ModManifestProcessor" (lifecycle: singletonFactory): AppContainer: No service registered for key "IModValidationOrchestrator". Known keys: [ILogger, ProxyUrl, IConfiguration, IPathResolver, ISchemaValidator, IDataRegistry, IDataFetcher, ITextDataFetcher, RuleLoader, ComponentLoader, ConditionLoader, ActionLoader, EventLoader, MacroLoader, EntityLoader, EntityInstanceLoader, WorldLoader, GoalLoader, AnatomyRecipeLoader, AnatomyBlueprintLoader, AnatomyBlueprintPartLoader, AnatomySlotLibraryLoader, AnatomyFormattingLoader, ScopeLoader, ModManifestLoader, GameConfigLoader, PromptTextLoader, ModLoadOrderResolver, ModManifestProcessor, ContentLoadManager, WorldLoadSummaryLogger, SchemaPhase, GameConfigPhase, ManifestPhase, ContentPhase, WorldPhase, SummaryPhase, ILoadCache, ModsLoader, SchemaLoader, ServiceSetup, IPathConfiguration, ITraceConfigLoader, ActionIndexingService, EventBus, IEventBus, ISpatialIndexManager, IGameDataRepository, IValidatedEventDispatcher, ISafeEventDispatcher, EventDispatchService, ScopeEngine, DslParser, IScopeEngine, IScopeDslErrorFactory, IScopeDslErrorHandler, ICriticalLogNotifier, CriticalLogNotifier, IActionTraceConfigValidator, IActionTraceConfigLoader, ITraceDirectoryManager, IIndexedDBStorageAdapter, IActionTraceFilter, IJsonTraceFormatter, IHumanReadableFormatter, IActionTraceOutputService, IActionAwareStructuredTrace, IEventDispatchTracer, IErrorMetrics, IRetryManager, IRecoveryManager, ITraceErrorHandler, ITracingConfigurationInitializer, IStorageProvider, ISaveFileRepository, ISaveLoadService, PlaytimeTracker, ComponentCleaningService, SaveMetadataBuilder, ActiveModsManifestBuilder, GameStateCaptureService, ManualSaveCoordinator, GamePersistenceService, IEntityManager, IWorldContext, ClosenessCircleService, EntityDisplayDataProvider, SpatialIndexSynchronizer, LocationQueryService, EntityAccessService, ComponentAccessService, LocationDisplayService, GraphIntegrityValidator, AnatomyQueryCache, RecipeProcessor, PartSelectionService, SocketManager, EntityGraphBuilder, RecipeConstraintEvaluator, BodyBlueprintFactory, BodyGraphService, JsonLogicCustomOperators, JsonLogicEvaluationService, AnatomyFormattingService, DescriptorFormatter, BodyPartDescriptionBuilder, BodyDescriptionComposer, PartDescriptionGenerator, DescriptionPersistenceService, BodyDescriptionOrchestrator, AnatomyDescriptionService, AnatomyGenerationService, LayerCompatibilityService, ClothingSlotValidator, EquipmentOrchestrator, LayerResolutionService, IAnatomySocketIndex, IAnatomyBlueprintRepository, AnatomyClothingCache, SlotResolver, ClothingManagementService, EquipmentDescriptionService, ClothingInstantiationService, ClothingInstantiationServiceV2, AnatomyInitializationService, IPipelineServiceFactory, IPipelineServiceRegistry, ITargetDependencyResolver, ILegacyTargetCompatibilityLayer, IScopeContextBuilder, ITargetDisplayNameResolver, IScopeRegistry, ActionIndex, IScopeCacheStrategy, IUnifiedScopeResolver, ITargetContextBuilder, IMultiTargetResolutionStage, ITargetResolutionService, TraceContextFactory, IFixSuggestionEngine, IActionErrorContextBuilder, ActionCandidateProcessor, ActionPipelineOrchestrator, IActionDiscoveryService, ActionValidationContextBuilder, PrerequisiteEvaluationService, IActionExecutionTraceFactory, ICommandProcessor, UnifiedErrorHandler, DirectiveStrategyResolver, CommandDispatcher, DirectiveExecutor, ResultInterpreter, ICommandOutcomeInterpreter, DispatchEventHandler, DispatchPerceptibleEventHandler, DispatchSpeechHandler, DispatchThoughtHandler, LogHandler, ModifyComponentHandler, AddComponentHandler, RemoveComponentHandler, QueryComponentHandler, QueryComponentsHandler, SetVariableHandler, EndTurnHandler, SystemMoveEntityHandler, IMoveEntityHandler, GetTimestampHandler, GetNameHandler, RebuildLeaderListCacheHandler, CheckFollowCycleHandler, EstablishFollowRelationHandler, BreakFollowRelationHandler, AddPerceptionLogEntryHandler, QueryEntitiesHandler, HasComponentHandler, ModifyArrayFieldHandler, ModifyContextArrayHandler, IfCoLocatedHandler, MathHandler, AutoMoveFollowersHandler, MergeClosenessCircleHandler, RemoveFromClosenessCircleHandler, EstablishSittingClosenessHandler, RemoveSittingClosenessHandler, HasBodyPartWithComponentValueHandler, UnequipClothingHandler, LockMovementHandler, LockMouthEngagementHandler, UnlockMovementHandler, UnlockMouthEngagementHandler, RegenerateDescriptionHandler, AtomicModifyComponentHandler, SequenceHandler, OperationRegistry, OperationInterpreter, ActionSequence, SystemLogicInterpreter, IHttpClient, LlmConfigLoader, ILLMConfigurationManager, ILLMRequestExecutor, ILLMErrorMapper, ITokenEstimator, LLMAdapter, LlmJsonService, CharacterDatabase, CharacterStorageService, ThematicDirectionGenerator, ClicheGenerator, CoreMotivationsGenerator, CoreMotivationsDisplayEnhancer, TraitsGenerator, TraitsDisplayEnhancer, SpeechPatternsResponseProcessor, SpeechPatternsGenerator, SpeechPatternsDisplayEnhancer, TraitsRewriterGenerator, TraitsRewriterResponseProcessor, TraitsRewriterDisplayEnhancer, CharacterBuilderService, ICharacterBuilderService, IPromptOutputPort, ITurnEndPort, IActionCategorizationService, WorldInitializer, SystemInitializer]

      119 |           error
      120 |         );
    > 121 |         throw new Error(
          |               ^
      122 |           `Failed to create instance for "${registrationKey}" (lifecycle: ${lifecycle}): ${error.message}`,
      123 |           { cause: error }
      124 |         );

      at AppContainer.resolve (src/dependencyInjection/appContainer.js:121:15)
      at CharacterBuilderBootstrap.resolve (src/characterBuilder/CharacterBuilderBootstrap.js:761:34)
      at CharacterBuilderBootstrap.bootstrap (src/characterBuilder/CharacterBuilderBootstrap.js:103:29)
      at Object.<anonymous> (tests/integration/characterBuilder/speechPatternsGeneratorRuntimeErrors.integration.test.js:260:7)

    Cause:
    Failed to create instance for "ManifestPhase" (lifecycle: singletonFactory): Failed to create instance for "ModManifestProcessor" (lifecycle: singletonFactory): AppContainer: No service registered for key "IModValidationOrchestrator". Known keys: [ILogger, ProxyUrl, IConfiguration, IPathResolver, ISchemaValidator, IDataRegistry, IDataFetcher, ITextDataFetcher, RuleLoader, ComponentLoader, ConditionLoader, ActionLoader, EventLoader, MacroLoader, EntityLoader, EntityInstanceLoader, WorldLoader, GoalLoader, AnatomyRecipeLoader, AnatomyBlueprintLoader, AnatomyBlueprintPartLoader, AnatomySlotLibraryLoader, AnatomyFormattingLoader, ScopeLoader, ModManifestLoader, GameConfigLoader, PromptTextLoader, ModLoadOrderResolver, ModManifestProcessor, ContentLoadManager, WorldLoadSummaryLogger, SchemaPhase, GameConfigPhase, ManifestPhase, ContentPhase, WorldPhase, SummaryPhase, ILoadCache, ModsLoader, SchemaLoader, ServiceSetup, IPathConfiguration, ITraceConfigLoader, ActionIndexingService, EventBus, IEventBus, ISpatialIndexManager, IGameDataRepository, IValidatedEventDispatcher, ISafeEventDispatcher, EventDispatchService, ScopeEngine, DslParser, IScopeEngine, IScopeDslErrorFactory, IScopeDslErrorHandler, ICriticalLogNotifier, CriticalLogNotifier, IActionTraceConfigValidator, IActionTraceConfigLoader, ITraceDirectoryManager, IIndexedDBStorageAdapter, IActionTraceFilter, IJsonTraceFormatter, IHumanReadableFormatter, IActionTraceOutputService, IActionAwareStructuredTrace, IEventDispatchTracer, IErrorMetrics, IRetryManager, IRecoveryManager, ITraceErrorHandler, ITracingConfigurationInitializer, IStorageProvider, ISaveFileRepository, ISaveLoadService, PlaytimeTracker, ComponentCleaningService, SaveMetadataBuilder, ActiveModsManifestBuilder, GameStateCaptureService, ManualSaveCoordinator, GamePersistenceService, IEntityManager, IWorldContext, ClosenessCircleService, EntityDisplayDataProvider, SpatialIndexSynchronizer, LocationQueryService, EntityAccessService, ComponentAccessService, LocationDisplayService, GraphIntegrityValidator, AnatomyQueryCache, RecipeProcessor, PartSelectionService, SocketManager, EntityGraphBuilder, RecipeConstraintEvaluator, BodyBlueprintFactory, BodyGraphService, JsonLogicCustomOperators, JsonLogicEvaluationService, AnatomyFormattingService, DescriptorFormatter, BodyPartDescriptionBuilder, BodyDescriptionComposer, PartDescriptionGenerator, DescriptionPersistenceService, BodyDescriptionOrchestrator, AnatomyDescriptionService, AnatomyGenerationService, LayerCompatibilityService, ClothingSlotValidator, EquipmentOrchestrator, LayerResolutionService, IAnatomySocketIndex, IAnatomyBlueprintRepository, AnatomyClothingCache, SlotResolver, ClothingManagementService, EquipmentDescriptionService, ClothingInstantiationService, ClothingInstantiationServiceV2, AnatomyInitializationService, IPipelineServiceFactory, IPipelineServiceRegistry, ITargetDependencyResolver, ILegacyTargetCompatibilityLayer, IScopeContextBuilder, ITargetDisplayNameResolver, IScopeRegistry, ActionIndex, IScopeCacheStrategy, IUnifiedScopeResolver, ITargetContextBuilder, IMultiTargetResolutionStage, ITargetResolutionService, TraceContextFactory, IFixSuggestionEngine, IActionErrorContextBuilder, ActionCandidateProcessor, ActionPipelineOrchestrator, IActionDiscoveryService, ActionValidationContextBuilder, PrerequisiteEvaluationService, IActionExecutionTraceFactory, ICommandProcessor, UnifiedErrorHandler, DirectiveStrategyResolver, CommandDispatcher, DirectiveExecutor, ResultInterpreter, ICommandOutcomeInterpreter, DispatchEventHandler, DispatchPerceptibleEventHandler, DispatchSpeechHandler, DispatchThoughtHandler, LogHandler, ModifyComponentHandler, AddComponentHandler, RemoveComponentHandler, QueryComponentHandler, QueryComponentsHandler, SetVariableHandler, EndTurnHandler, SystemMoveEntityHandler, IMoveEntityHandler, GetTimestampHandler, GetNameHandler, RebuildLeaderListCacheHandler, CheckFollowCycleHandler, EstablishFollowRelationHandler, BreakFollowRelationHandler, AddPerceptionLogEntryHandler, QueryEntitiesHandler, HasComponentHandler, ModifyArrayFieldHandler, ModifyContextArrayHandler, IfCoLocatedHandler, MathHandler, AutoMoveFollowersHandler, MergeClosenessCircleHandler, RemoveFromClosenessCircleHandler, EstablishSittingClosenessHandler, RemoveSittingClosenessHandler, HasBodyPartWithComponentValueHandler, UnequipClothingHandler, LockMovementHandler, LockMouthEngagementHandler, UnlockMovementHandler, UnlockMouthEngagementHandler, RegenerateDescriptionHandler, AtomicModifyComponentHandler, SequenceHandler, OperationRegistry, OperationInterpreter, ActionSequence, SystemLogicInterpreter, IHttpClient, LlmConfigLoader, ILLMConfigurationManager, ILLMRequestExecutor, ILLMErrorMapper, ITokenEstimator, LLMAdapter, LlmJsonService, CharacterDatabase, CharacterStorageService, ThematicDirectionGenerator, ClicheGenerator, CoreMotivationsGenerator, CoreMotivationsDisplayEnhancer, TraitsGenerator, TraitsDisplayEnhancer, SpeechPatternsResponseProcessor, SpeechPatternsGenerator, SpeechPatternsDisplayEnhancer, TraitsRewriterGenerator, TraitsRewriterResponseProcessor, TraitsRewriterDisplayEnhancer, CharacterBuilderService, ICharacterBuilderService, IPromptOutputPort, ITurnEndPort, IActionCategorizationService, WorldInitializer, SystemInitializer]

      119 |           error
      120 |         );
    > 121 |         throw new Error(
          |               ^
      122 |           `Failed to create instance for "${registrationKey}" (lifecycle: ${lifecycle}): ${error.message}`,
      123 |           { cause: error }
      124 |         );

      at AppContainer.resolve (src/dependencyInjection/appContainer.js:121:15)
      at resolve (src/dependencyInjection/registrations/loadersRegistrations.js:433:25)
      at AppContainer.factoryFn [as _invokeFactory] (src/dependencyInjection/appContainer.js:249:12)
      at AppContainer._invokeFactory [as _createInstance] (src/dependencyInjection/appContainer.js:190:19)
      at AppContainer._createInstance [as resolve] (src/dependencyInjection/appContainer.js:109:31)
      at CharacterBuilderBootstrap.resolve (src/characterBuilder/CharacterBuilderBootstrap.js:761:34)
      at CharacterBuilderBootstrap.bootstrap (src/characterBuilder/CharacterBuilderBootstrap.js:103:29)
      at Object.<anonymous> (tests/integration/characterBuilder/speechPatternsGeneratorRuntimeErrors.integration.test.js:260:7)

    Cause:
    Failed to create instance for "ModManifestProcessor" (lifecycle: singletonFactory): AppContainer: No service registered for key "IModValidationOrchestrator". Known keys: [ILogger, ProxyUrl, IConfiguration, IPathResolver, ISchemaValidator, IDataRegistry, IDataFetcher, ITextDataFetcher, RuleLoader, ComponentLoader, ConditionLoader, ActionLoader, EventLoader, MacroLoader, EntityLoader, EntityInstanceLoader, WorldLoader, GoalLoader, AnatomyRecipeLoader, AnatomyBlueprintLoader, AnatomyBlueprintPartLoader, AnatomySlotLibraryLoader, AnatomyFormattingLoader, ScopeLoader, ModManifestLoader, GameConfigLoader, PromptTextLoader, ModLoadOrderResolver, ModManifestProcessor, ContentLoadManager, WorldLoadSummaryLogger, SchemaPhase, GameConfigPhase, ManifestPhase, ContentPhase, WorldPhase, SummaryPhase, ILoadCache, ModsLoader, SchemaLoader, ServiceSetup, IPathConfiguration, ITraceConfigLoader, ActionIndexingService, EventBus, IEventBus, ISpatialIndexManager, IGameDataRepository, IValidatedEventDispatcher, ISafeEventDispatcher, EventDispatchService, ScopeEngine, DslParser, IScopeEngine, IScopeDslErrorFactory, IScopeDslErrorHandler, ICriticalLogNotifier, CriticalLogNotifier, IActionTraceConfigValidator, IActionTraceConfigLoader, ITraceDirectoryManager, IIndexedDBStorageAdapter, IActionTraceFilter, IJsonTraceFormatter, IHumanReadableFormatter, IActionTraceOutputService, IActionAwareStructuredTrace, IEventDispatchTracer, IErrorMetrics, IRetryManager, IRecoveryManager, ITraceErrorHandler, ITracingConfigurationInitializer, IStorageProvider, ISaveFileRepository, ISaveLoadService, PlaytimeTracker, ComponentCleaningService, SaveMetadataBuilder, ActiveModsManifestBuilder, GameStateCaptureService, ManualSaveCoordinator, GamePersistenceService, IEntityManager, IWorldContext, ClosenessCircleService, EntityDisplayDataProvider, SpatialIndexSynchronizer, LocationQueryService, EntityAccessService, ComponentAccessService, LocationDisplayService, GraphIntegrityValidator, AnatomyQueryCache, RecipeProcessor, PartSelectionService, SocketManager, EntityGraphBuilder, RecipeConstraintEvaluator, BodyBlueprintFactory, BodyGraphService, JsonLogicCustomOperators, JsonLogicEvaluationService, AnatomyFormattingService, DescriptorFormatter, BodyPartDescriptionBuilder, BodyDescriptionComposer, PartDescriptionGenerator, DescriptionPersistenceService, BodyDescriptionOrchestrator, AnatomyDescriptionService, AnatomyGenerationService, LayerCompatibilityService, ClothingSlotValidator, EquipmentOrchestrator, LayerResolutionService, IAnatomySocketIndex, IAnatomyBlueprintRepository, AnatomyClothingCache, SlotResolver, ClothingManagementService, EquipmentDescriptionService, ClothingInstantiationService, ClothingInstantiationServiceV2, AnatomyInitializationService, IPipelineServiceFactory, IPipelineServiceRegistry, ITargetDependencyResolver, ILegacyTargetCompatibilityLayer, IScopeContextBuilder, ITargetDisplayNameResolver, IScopeRegistry, ActionIndex, IScopeCacheStrategy, IUnifiedScopeResolver, ITargetContextBuilder, IMultiTargetResolutionStage, ITargetResolutionService, TraceContextFactory, IFixSuggestionEngine, IActionErrorContextBuilder, ActionCandidateProcessor, ActionPipelineOrchestrator, IActionDiscoveryService, ActionValidationContextBuilder, PrerequisiteEvaluationService, IActionExecutionTraceFactory, ICommandProcessor, UnifiedErrorHandler, DirectiveStrategyResolver, CommandDispatcher, DirectiveExecutor, ResultInterpreter, ICommandOutcomeInterpreter, DispatchEventHandler, DispatchPerceptibleEventHandler, DispatchSpeechHandler, DispatchThoughtHandler, LogHandler, ModifyComponentHandler, AddComponentHandler, RemoveComponentHandler, QueryComponentHandler, QueryComponentsHandler, SetVariableHandler, EndTurnHandler, SystemMoveEntityHandler, IMoveEntityHandler, GetTimestampHandler, GetNameHandler, RebuildLeaderListCacheHandler, CheckFollowCycleHandler, EstablishFollowRelationHandler, BreakFollowRelationHandler, AddPerceptionLogEntryHandler, QueryEntitiesHandler, HasComponentHandler, ModifyArrayFieldHandler, ModifyContextArrayHandler, IfCoLocatedHandler, MathHandler, AutoMoveFollowersHandler, MergeClosenessCircleHandler, RemoveFromClosenessCircleHandler, EstablishSittingClosenessHandler, RemoveSittingClosenessHandler, HasBodyPartWithComponentValueHandler, UnequipClothingHandler, LockMovementHandler, LockMouthEngagementHandler, UnlockMovementHandler, UnlockMouthEngagementHandler, RegenerateDescriptionHandler, AtomicModifyComponentHandler, SequenceHandler, OperationRegistry, OperationInterpreter, ActionSequence, SystemLogicInterpreter, IHttpClient, LlmConfigLoader, ILLMConfigurationManager, ILLMRequestExecutor, ILLMErrorMapper, ITokenEstimator, LLMAdapter, LlmJsonService, CharacterDatabase, CharacterStorageService, ThematicDirectionGenerator, ClicheGenerator, CoreMotivationsGenerator, CoreMotivationsDisplayEnhancer, TraitsGenerator, TraitsDisplayEnhancer, SpeechPatternsResponseProcessor, SpeechPatternsGenerator, SpeechPatternsDisplayEnhancer, TraitsRewriterGenerator, TraitsRewriterResponseProcessor, TraitsRewriterDisplayEnhancer, CharacterBuilderService, ICharacterBuilderService, IPromptOutputPort, ITurnEndPort, IActionCategorizationService, WorldInitializer, SystemInitializer]

      119 |           error
      120 |         );
    > 121 |         throw new Error(
          |               ^
      122 |           `Failed to create instance for "${registrationKey}" (lifecycle: ${lifecycle}): ${error.message}`,
      123 |           { cause: error }
      124 |         );

      at AppContainer.resolve (src/dependencyInjection/appContainer.js:121:15)
      at resolve (src/dependencyInjection/registrations/loadersRegistrations.js:377:22)
      at AppContainer.factoryFn [as _invokeFactory] (src/dependencyInjection/appContainer.js:249:12)
      at AppContainer._invokeFactory [as _createInstance] (src/dependencyInjection/appContainer.js:190:19)
      at AppContainer._createInstance [as resolve] (src/dependencyInjection/appContainer.js:109:31)
      at resolve (src/dependencyInjection/registrations/loadersRegistrations.js:433:25)
      at AppContainer.factoryFn [as _invokeFactory] (src/dependencyInjection/appContainer.js:249:12)
      at AppContainer._invokeFactory [as _createInstance] (src/dependencyInjection/appContainer.js:190:19)
      at AppContainer._createInstance [as resolve] (src/dependencyInjection/appContainer.js:109:31)
      at CharacterBuilderBootstrap.resolve (src/characterBuilder/CharacterBuilderBootstrap.js:761:34)
      at CharacterBuilderBootstrap.bootstrap (src/characterBuilder/CharacterBuilderBootstrap.js:103:29)
      at Object.<anonymous> (tests/integration/characterBuilder/speechPatternsGeneratorRuntimeErrors.integration.test.js:260:7)

    Cause:
    AppContainer: No service registered for key "IModValidationOrchestrator". Known keys: [ILogger, ProxyUrl, IConfiguration, IPathResolver, ISchemaValidator, IDataRegistry, IDataFetcher, ITextDataFetcher, RuleLoader, ComponentLoader, ConditionLoader, ActionLoader, EventLoader, MacroLoader, EntityLoader, EntityInstanceLoader, WorldLoader, GoalLoader, AnatomyRecipeLoader, AnatomyBlueprintLoader, AnatomyBlueprintPartLoader, AnatomySlotLibraryLoader, AnatomyFormattingLoader, ScopeLoader, ModManifestLoader, GameConfigLoader, PromptTextLoader, ModLoadOrderResolver, ModManifestProcessor, ContentLoadManager, WorldLoadSummaryLogger, SchemaPhase, GameConfigPhase, ManifestPhase, ContentPhase, WorldPhase, SummaryPhase, ILoadCache, ModsLoader, SchemaLoader, ServiceSetup, IPathConfiguration, ITraceConfigLoader, ActionIndexingService, EventBus, IEventBus, ISpatialIndexManager, IGameDataRepository, IValidatedEventDispatcher, ISafeEventDispatcher, EventDispatchService, ScopeEngine, DslParser, IScopeEngine, IScopeDslErrorFactory, IScopeDslErrorHandler, ICriticalLogNotifier, CriticalLogNotifier, IActionTraceConfigValidator, IActionTraceConfigLoader, ITraceDirectoryManager, IIndexedDBStorageAdapter, IActionTraceFilter, IJsonTraceFormatter, IHumanReadableFormatter, IActionTraceOutputService, IActionAwareStructuredTrace, IEventDispatchTracer, IErrorMetrics, IRetryManager, IRecoveryManager, ITraceErrorHandler, ITracingConfigurationInitializer, IStorageProvider, ISaveFileRepository, ISaveLoadService, PlaytimeTracker, ComponentCleaningService, SaveMetadataBuilder, ActiveModsManifestBuilder, GameStateCaptureService, ManualSaveCoordinator, GamePersistenceService, IEntityManager, IWorldContext, ClosenessCircleService, EntityDisplayDataProvider, SpatialIndexSynchronizer, LocationQueryService, EntityAccessService, ComponentAccessService, LocationDisplayService, GraphIntegrityValidator, AnatomyQueryCache, RecipeProcessor, PartSelectionService, SocketManager, EntityGraphBuilder, RecipeConstraintEvaluator, BodyBlueprintFactory, BodyGraphService, JsonLogicCustomOperators, JsonLogicEvaluationService, AnatomyFormattingService, DescriptorFormatter, BodyPartDescriptionBuilder, BodyDescriptionComposer, PartDescriptionGenerator, DescriptionPersistenceService, BodyDescriptionOrchestrator, AnatomyDescriptionService, AnatomyGenerationService, LayerCompatibilityService, ClothingSlotValidator, EquipmentOrchestrator, LayerResolutionService, IAnatomySocketIndex, IAnatomyBlueprintRepository, AnatomyClothingCache, SlotResolver, ClothingManagementService, EquipmentDescriptionService, ClothingInstantiationService, ClothingInstantiationServiceV2, AnatomyInitializationService, IPipelineServiceFactory, IPipelineServiceRegistry, ITargetDependencyResolver, ILegacyTargetCompatibilityLayer, IScopeContextBuilder, ITargetDisplayNameResolver, IScopeRegistry, ActionIndex, IScopeCacheStrategy, IUnifiedScopeResolver, ITargetContextBuilder, IMultiTargetResolutionStage, ITargetResolutionService, TraceContextFactory, IFixSuggestionEngine, IActionErrorContextBuilder, ActionCandidateProcessor, ActionPipelineOrchestrator, IActionDiscoveryService, ActionValidationContextBuilder, PrerequisiteEvaluationService, IActionExecutionTraceFactory, ICommandProcessor, UnifiedErrorHandler, DirectiveStrategyResolver, CommandDispatcher, DirectiveExecutor, ResultInterpreter, ICommandOutcomeInterpreter, DispatchEventHandler, DispatchPerceptibleEventHandler, DispatchSpeechHandler, DispatchThoughtHandler, LogHandler, ModifyComponentHandler, AddComponentHandler, RemoveComponentHandler, QueryComponentHandler, QueryComponentsHandler, SetVariableHandler, EndTurnHandler, SystemMoveEntityHandler, IMoveEntityHandler, GetTimestampHandler, GetNameHandler, RebuildLeaderListCacheHandler, CheckFollowCycleHandler, EstablishFollowRelationHandler, BreakFollowRelationHandler, AddPerceptionLogEntryHandler, QueryEntitiesHandler, HasComponentHandler, ModifyArrayFieldHandler, ModifyContextArrayHandler, IfCoLocatedHandler, MathHandler, AutoMoveFollowersHandler, MergeClosenessCircleHandler, RemoveFromClosenessCircleHandler, EstablishSittingClosenessHandler, RemoveSittingClosenessHandler, HasBodyPartWithComponentValueHandler, UnequipClothingHandler, LockMovementHandler, LockMouthEngagementHandler, UnlockMovementHandler, UnlockMouthEngagementHandler, RegenerateDescriptionHandler, AtomicModifyComponentHandler, SequenceHandler, OperationRegistry, OperationInterpreter, ActionSequence, SystemLogicInterpreter, IHttpClient, LlmConfigLoader, ILLMConfigurationManager, ILLMRequestExecutor, ILLMErrorMapper, ITokenEstimator, LLMAdapter, LlmJsonService, CharacterDatabase, CharacterStorageService, ThematicDirectionGenerator, ClicheGenerator, CoreMotivationsGenerator, CoreMotivationsDisplayEnhancer, TraitsGenerator, TraitsDisplayEnhancer, SpeechPatternsResponseProcessor, SpeechPatternsGenerator, SpeechPatternsDisplayEnhancer, TraitsRewriterGenerator, TraitsRewriterResponseProcessor, TraitsRewriterDisplayEnhancer, CharacterBuilderService, ICharacterBuilderService, IPromptOutputPort, ITurnEndPort, IActionCategorizationService, WorldInitializer, SystemInitializer]

      94 |     if (!registration) {
      95 |       const knownKeys = Array.from(this.#registrations.keys()).join(', ');
    > 96 |       throw new Error(
         |             ^
      97 |         `AppContainer: No service registered for key "${registrationKey}". Known keys: [${knownKeys}]`
      98 |       );
      99 |     }

      at AppContainer.resolve (src/dependencyInjection/appContainer.js:96:13)
      at resolve (src/dependencyInjection/registrations/loadersRegistrations.js:314:36)
      at AppContainer.factoryFn [as _invokeFactory] (src/dependencyInjection/appContainer.js:249:12)
      at AppContainer._invokeFactory [as _createInstance] (src/dependencyInjection/appContainer.js:190:19)
      at AppContainer._createInstance [as resolve] (src/dependencyInjection/appContainer.js:109:31)
      at resolve (src/dependencyInjection/registrations/loadersRegistrations.js:377:22)
      at AppContainer.factoryFn [as _invokeFactory] (src/dependencyInjection/appContainer.js:249:12)
      at AppContainer._invokeFactory [as _createInstance] (src/dependencyInjection/appContainer.js:190:19)
      at AppContainer._createInstance [as resolve] (src/dependencyInjection/appContainer.js:109:31)
      at resolve (src/dependencyInjection/registrations/loadersRegistrations.js:433:25)
      at AppContainer.factoryFn [as _invokeFactory] (src/dependencyInjection/appContainer.js:249:12)
      at AppContainer._invokeFactory [as _createInstance] (src/dependencyInjection/appContainer.js:190:19)
      at AppContainer._createInstance [as resolve] (src/dependencyInjection/appContainer.js:109:31)
      at CharacterBuilderBootstrap.resolve (src/characterBuilder/CharacterBuilderBootstrap.js:761:34)
      at CharacterBuilderBootstrap.bootstrap (src/characterBuilder/CharacterBuilderBootstrap.js:103:29)
      at Object.<anonymous> (tests/integration/characterBuilder/speechPatternsGeneratorRuntimeErrors.integration.test.js:260:7)