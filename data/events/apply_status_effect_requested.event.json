{
  "$schema": "http://example.com/schemas/event-definition.schema.json",
  "id": "event:apply_status_effect_requested",
  "description": "Signals a request to apply a status effect to an entity, typically triggered by an item effect. Contains context from the item usage and specific effect parameters.",
  "payloadSchema": {
    "type": "object",
    "properties": {
      "userId": {
        "type": "string",
        "description": "The ID of the entity that initiated the item use action.",
        "$ref": "./common.schema.json#/definitions/namespacedId"
      },
      "itemInstanceId": {
        "type": "string",
        "description": "The instance ID of the item used.",
        "$ref": "./common.schema.json#/definitions/namespacedId"
      },
      "itemDefinitionId": {
        "type": "string",
        "description": "The definition ID of the item used.",
        "$ref": "./common.schema.json#/definitions/namespacedId"
      },
      "sourceItemName": {
        "type": "string",
        "description": "The display name of the item used."
      },
      "validatedTargetId": {
        "description": "The ID of the entity/connection targeted by the item use command (if any).",
        "$ref": "./common.schema.json#/definitions/nullableNamespacedId"
      },
      "validatedTargetType": {
        "type": "string",
        "description": "The type of the target specified in the command.",
        "enum": [
          "entity",
          "connection",
          "none"
        ]
      },
      "effectId": {
        "type": "string",
        "description": "The unique identifier of the status effect definition to apply (e.g., 'poisoned', 'blessed') (sourced from effect parameters).",
        "$ref": "./common.schema.json#/definitions/namespacedId"
      },
      "duration": {
        "type": [
          "number",
          "null"
        ],
        "description": "The duration of the effect in game ticks or seconds. Null might mean permanent until removed (sourced from effect parameters)."
      },
      "stacks": {
        "type": "number",
        "description": "Optional. The number of stacks to apply (sourced from effect parameters). Defaults to 1 if not specified.",
        "default": 1
      },
      "effectOverrides": {
        "type": "object",
        "description": "Optional. Key-value pairs to override default parameters of the status effect definition (e.g., potency, specific stat changes) (sourced from effect parameters).",
        "additionalProperties": true
      },
      "statusEffectTargetSpecifier": {
        "type": "string",
        "description": "Specifies who should receive the status effect relative to the action ('user' = the entity using the item, 'target' = the validated target of the item use) (sourced from effect parameters).",
        "enum": [
          "user",
          "target"
        ]
      }
    },
    "required": [
      "userId",
      "itemInstanceId",
      "itemDefinitionId",
      "sourceItemName",
      "validatedTargetId",
      "validatedTargetType",
      "effectId",
      "duration",
      "statusEffectTargetSpecifier"
    ],
    "additionalProperties": false
  }
}