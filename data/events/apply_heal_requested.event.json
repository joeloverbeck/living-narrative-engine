{
  "$schema": "http://example.com/schemas/event-definition.schema.json",
  "id": "event:apply_heal_requested",
  "description": "Signals a request to apply healing to an entity, typically triggered by an item effect. Contains context from the item usage and specific heal parameters.",
  "payloadSchema": {
    "type": "object",
    "properties": {
      "userId": {
        "type": "string",
        "description": "The ID of the entity that initiated the item use action.",
        "$ref": "./common.schema.json#/definitions/namespacedId"
      },
      "itemInstanceId": {
        "type": "string",
        "description": "The instance ID of the item used.",
        "$ref": "./common.schema.json#/definitions/namespacedId"
      },
      "itemDefinitionId": {
        "type": "string",
        "description": "The definition ID of the item used.",
        "$ref": "./common.schema.json#/definitions/namespacedId"
      },
      "sourceItemName": {
        "type": "string",
        "description": "The display name of the item used."
      },
      "validatedTargetId": {
        "description": "The ID of the entity/connection targeted by the item use command (if any).",
        "$ref": "./common.schema.json#/definitions/nullableNamespacedId"
      },
      "validatedTargetType": {
        "type": "string",
        "description": "The type of the target specified in the command.",
        "enum": [
          "entity",
          "connection",
          "none"
        ]
      },
      "amount": {
        "type": "number",
        "description": "The amount of health to restore (sourced from effect parameters)."
      },
      "healTargetSpecifier": {
        "type": "string",
        "description": "Specifies who should receive the heal relative to the action ('user' = the entity using the item, 'target' = the validated target of the item use) (sourced from effect parameters).",
        "enum": [
          "user",
          "target"
        ]
      }
    },
    "required": [
      "userId",
      "itemInstanceId",
      "itemDefinitionId",
      "sourceItemName",
      "validatedTargetId",
      "validatedTargetType",
      "amount",
      "healTargetSpecifier"
    ],
    "additionalProperties": false
  }
}