{
  "$schema": "http://example.com/schemas/event-definition.schema.json",
  "id": "event:inflict_damage_requested",
  "description": "Signals a request to inflict damage on an entity, typically triggered by an item effect. Contains context from the item usage and specific damage parameters.",
  "payloadSchema": {
    "type": "object",
    "properties": {
      "userId": {
        "type": "string",
        "description": "The ID of the entity that initiated the item use action (the source of the damage).",
        "$ref": "./common.schema.json#/definitions/namespacedId"
      },
      "itemInstanceId": {
        "type": "string",
        "description": "The instance ID of the item used.",
        "$ref": "./common.schema.json#/definitions/namespacedId"
      },
      "itemDefinitionId": {
        "type": "string",
        "description": "The definition ID of the item used.",
        "$ref": "./common.schema.json#/definitions/namespacedId"
      },
      "sourceItemName": {
        "type": "string",
        "description": "The display name of the item used."
      },
      "validatedTargetId": {
        "description": "The ID of the entity/connection targeted by the item use command (if any).",
        "$ref": "./common.schema.json#/definitions/nullableNamespacedId"
      },
      "validatedTargetType": {
        "type": "string",
        "description": "The type of the target specified in the command.",
        "enum": [
          "entity",
          "connection",
          "none"
        ]
      },
      "damageAmount": {
        "type": "number",
        "description": "The base amount of damage to inflict (sourced from effect parameters)."
      },
      "damageType": {
        "type": "string",
        "description": "Optional. The type of damage (e.g., 'physical', 'fire', 'arcane') (sourced from effect parameters). Defaults if not specified."
      },
      "damageTargetSpecifier": {
        "type": "string",
        "description": "Specifies who should receive the damage relative to the action ('user' = the entity using the item, 'target' = the validated target of the item use) (sourced from effect parameters).",
        "enum": [
          "user",
          "target"
        ]
      }
    },
    "required": [
      "userId",
      "itemInstanceId",
      "itemDefinitionId",
      "sourceItemName",
      "validatedTargetId",
      "validatedTargetType",
      "damageAmount",
      "damageTargetSpecifier"
    ],
    "additionalProperties": false
  }
}