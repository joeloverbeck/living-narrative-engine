{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://example.com/schemas/location.schema.json",
  "title": "Location Entity Schema",
  "description": "Defines the structure for a Location entity in the adventure game platform. Locations are entities composed of components.",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "id",
    "components"
  ],
  "properties": {
    "id": {
      "$ref": "./common.schema.json#/definitions/namespacedId",
      "description": "A unique identifier for this location entity (e.g., 'core:room_entry', 'story_alpha:cave_chamber_1'). Used for linking connections and references."
    },
    "components": {
      "type": "object",
      "description": "A container for the components that define this location's properties and behavior.",
      "additionalProperties": false,
      "required": [
        "Name",
        "Connections"
      ],
      "properties": {
        "Name": {
          "$ref": "common.schema.json#/definitions/NameComponent",
          "description": "Component defining the display name of the location."
        },
        "Description": {
          "$ref": "common.schema.json#/definitions/DescriptionComponent",
          "description": "Component defining the static, pre-written narrative description of the location."
        },
        "MetaDescription": {
          "$ref": "common.schema.json#/definitions/MetaDescriptionComponent",
          "description": "Component providing concise keywords for generating dynamic descriptions via an LLM (used in Phase 3+)."
        },
        "Connections": {
          "$ref": "common.schema.json#/definitions/LocationConnections",
          "description": "Component defining the exits or links from this location by referencing Connection entities."
        }
      },
      "anyOf": [
        {
          "required": [
            "Description"
          ],
          "description": "Ensures that the location has at least a static description."
        },
        {
          "required": [
            "MetaDescription"
          ],
          "description": "Ensures that the location has at least a meta-description for AI generation."
        }
      ]
    }
  }
}