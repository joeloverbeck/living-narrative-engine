{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://example.com/schemas/equippable.schema.json",
  "title": "Equippable Component Schema",
  "description": "Defines item equippability: slot, effects, and requirements.",
  "type": "object",
  "required": [
    "slotId"
  ],
  "properties": {
    "slotId": {
      "$ref": "common.schema.json#/definitions/namespacedId",
      "description": "ID of the equipment slot this item occupies (e.g., 'core:slot_main_hand', 'core:slot_head'). Must match slots defined in EquipmentComponent.",
      "examples": [
        "core:slot_main_hand",
        "core:slot_body"
      ]
    },
    "equipEffects": {
      "$comment": "Currently only defines 'stat_mod'. Could be expanded with other passive effects (resistances, skills, special abilities).",
      "type": "array",
      "description": "Passive effects applied to the wearer while equipped.",
      "default": [],
      "items": {
        "type": "object",
        "required": [
          "type"
        ],
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "stat_mod",
              "skill_mod",
              "resistance"
            ]
          },
          "stat": {
            "$ref": "common.schema.json#/definitions/namespacedId",
            "description": "ID of stat (e.g., 'core:attr_strength'). Req for 'stat_mod'."
          },
          "value": {
            "type": "integer",
            "description": "Amount to modify by (can be negative). Req for 'stat_mod', 'skill_mod'."
          },
          "skill": {
            "$ref": "common.schema.json#/definitions/namespacedId",
            "description": "ID of skill (e.g., 'core:skill_stealth'). Req for 'skill_mod'."
          },
          "damage_type": {
            "type": "string",
            "description": "Type of damage to resist (e.g., 'fire', 'cold'). Req for 'resistance'."
          },
          "resistance_value": {
            "type": "integer",
            "description": "Amount or percentage of resistance. Req for 'resistance'."
          }
        },
        "allOf": [
          {
            "if": {
              "properties": {
                "type": {
                  "const": "stat_mod"
                }
              }
            },
            "then": {
              "required": [
                "stat",
                "value"
              ]
            }
          },
          {
            "if": {
              "properties": {
                "type": {
                  "const": "skill_mod"
                }
              }
            },
            "then": {
              "required": [
                "skill",
                "value"
              ]
            }
          },
          {
            "if": {
              "properties": {
                "type": {
                  "const": "resistance"
                }
              }
            },
            "then": {
              "required": [
                "damage_type",
                "resistance_value"
              ]
            }
          }
        ]
      },
      "examples": [
        [
          {
            "type": "stat_mod",
            "stat": "core:attr_strength",
            "value": 1
          }
        ],
        [
          {
            "type": "stat_mod",
            "stat": "core:attr_defense",
            "value": 5
          },
          {
            "type": "stat_mod",
            "stat": "core:attr_agility",
            "value": -1
          }
        ],
        [
          {
            "type": "resistance",
            "damage_type": "fire",
            "resistance_value": 10
          }
        ]
      ]
    },
    "requirements": {
      "type": "array",
      "description": "Optional list of conditions the entity must meet to equip this item.",
      "items": {
        "$ref": "usable.schema.json#/definitions/ConditionObject"
      },
      "default": []
    }
  },
  "additionalProperties": false
}