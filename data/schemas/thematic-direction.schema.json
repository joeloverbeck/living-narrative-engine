{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "schema://living-narrative-engine/thematic-direction.schema.json",
  "title": "Thematic Direction",
  "description": "Schema for thematic direction data in the character builder system",
  "type": "object",
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$",
      "description": "Unique identifier (UUID)"
    },
    "conceptId": {
      "type": "string",
      "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$",
      "description": "Reference to parent CharacterConcept"
    },
    "title": {
      "type": "string",
      "minLength": 5,
      "maxLength": 300,
      "description": "Brief title/summary of the direction"
    },
    "description": {
      "type": "string",
      "minLength": 20,
      "maxLength": 1500,
      "description": "Detailed description of the thematic direction"
    },
    "coreTension": {
      "type": "string",
      "minLength": 10,
      "maxLength": 600,
      "description": "Core tension or conflict this direction embodies"
    },
    "uniqueTwist": {
      "type": "string",
      "minLength": 10,
      "maxLength": 3000,
      "description": "Suggested unique twist or deeper archetype"
    },
    "narrativePotential": {
      "type": "string",
      "minLength": 10,
      "maxLength": 3000,
      "description": "Description of narrative possibilities"
    },
    "createdAt": {
      "type": "string",
      "format": "date-time",
      "description": "Creation timestamp"
    },
    "llmMetadata": {
      "type": "object",
      "properties": {
        "modelId": {
          "type": "string",
          "description": "LLM model identifier used for generation"
        },
        "promptTokens": {
          "type": "number",
          "minimum": 0,
          "description": "Number of tokens in the prompt"
        },
        "responseTokens": {
          "type": "number",
          "minimum": 0,
          "description": "Number of tokens in the response"
        },
        "processingTime": {
          "type": "number",
          "minimum": 0,
          "description": "Processing time in milliseconds"
        }
      },
      "additionalProperties": true,
      "description": "LLM response metadata"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time",
      "description": "Last update timestamp"
    }
  },
  "required": [
    "id",
    "conceptId",
    "title",
    "description",
    "coreTension",
    "uniqueTwist",
    "narrativePotential",
    "createdAt"
  ],
  "additionalProperties": false
}
