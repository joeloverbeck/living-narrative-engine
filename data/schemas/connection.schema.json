{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://example.com/schemas/connection.schema.json",
  "title": "Connection Entity Schema",
  "description": "Defines the structure for a Connection entity, representing a bi-directional passage between two locations. Inherits from the base entity schema and requires PassageDetailsComponent.",
  "type": "object",
  "allOf": [
    {
      "$ref": "./entity.schema.json"
    }
  ],
  "properties": {
    "id": {
      "$ref": "./common.schema.json#/definitions/namespacedId",
      "description": "Unique identifier for this connection entity (e.g., 'conn:hall_to_kitchen_door', 'conn:cave1_to_cave2_path')."
    },
    "components": {
      "type": "object",
      "description": "Components defining the connection's properties. Must include PassageDetails.",
      "required": [
        "PassageDetails"
      ],
      "properties": {
        "PassageDetails": {
          "$ref": "./common.schema.json#/definitions/PassageDetailsComponent",
          "description": "Core component defining the two locations linked, travel directions, blocker, state, etc."
        },
        "Name": {
          "$ref": "./common.schema.json#/definitions/NameComponent",
          "description": "(Optional but Recommended) A name for the connection entity itself, useful for debugging or direct interaction (e.g., 'Rusty Iron Door', 'Hidden Path')."
        },
        "Description": {
          "$ref": "./common.schema.json#/definitions/DescriptionComponent",
          "description": "(Optional) A general description of the connection object itself, potentially independent of the view from A or B (e.g., 'A sturdy oak door reinforced with iron bands.')."
        },
        "Openable": {
          "$ref": "./common.schema.json#/definitions/OpenableComponent"
        },
        "Lockable": {
          "$ref": "./common.schema.json#/definitions/LockableComponent"
        },
        "Breakable": {
          "$ref": "./common.schema.json#/definitions/BreakableComponent"
        }
      },
      "additionalProperties": true
    }
  },
  "required": [
    "id",
    "components"
  ],
  "additionalProperties": false
}