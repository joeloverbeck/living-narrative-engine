{
  "$schema": "schema://living-narrative-engine/action.schema.json",
  "id": "examples:unlock_container_with_key",
  "name": "Unlock Container with Key",
  "description": "Use a key to unlock a container",
  "targets": {
    "primary": {
      "scope": "examples:locked_containers",
      "placeholder": "container",
      "description": "Container to unlock"
    },
    "secondary": {
      "scope": "examples:keys",
      "placeholder": "key",
      "description": "Key that can unlock the container",
      "contextFrom": "primary"
    }
  },
  "generateCombinations": false,
  "required_components": {
    "actor": ["core:inventory", "core:position"]
  },
  "prerequisites": [
    {
      "logic": {
        "in": [
          { "var": "container.components.core:container.lock_type" },
          { "var": "key.components.core:key.types" }
        ]
      },
      "failure_message": "The key doesn't match the container's lock."
    },
    {
      "logic": {
        "<=": [{ "var": "distance_to_container" }, 1]
      },
      "failure_message": "You must be close to the container to unlock it."
    },
    {
      "logic": {
        "==": [{ "var": "container.components.core:container.locked" }, true]
      },
      "failure_message": "The container is already unlocked."
    }
  ],
  "template": "unlock {container} with {key}",
  "visual": {
    "backgroundColor": "#455a64",
    "textColor": "#ffffff",
    "hoverBackgroundColor": "#37474f",
    "hoverTextColor": "#ffffff"
  }
}
