{
    "$schema": "schema://living-narrative-engine/expression.schema.json",
    "id": "emotions-guilt:guilt_driven_repair_impulse",
    "description": "Urgent need to make amends triggered by rapidly rising guilt",
    "priority": 74,
    "prerequisites": [
        {
            "logic": {
                "and": [
                    {
                        ">=": [
                            {
                                "var": "emotions.remorse"
                            },
                            0.55
                        ]
                    },
                    {
                        ">=": [
                            {
                                "var": "emotions.guilt"
                            },
                            0.45
                        ]
                    },
                    {
                        ">=": [
                            {
                                "var": "emotions.regret"
                            },
                            0.25
                        ]
                    },
                    {
                        "<": [
                            {
                                "var": "emotions.humiliation"
                            },
                            0.55
                        ]
                    },
                    {
                        "<": [
                            {
                                "var": "emotions.shame"
                            },
                            0.65
                        ]
                    },
                    {
                        "<=": [
                            {
                                "var": "emotions.apathy"
                            },
                            0.55
                        ]
                    },
                    {
                        "<=": [
                            {
                                "var": "emotions.numbness"
                            },
                            0.7
                        ]
                    },
                    {
                        ">=": [
                            {
                                "var": "moodAxes.agency_control"
                            },
                            5
                        ]
                    },
                    {
                        "or": [
                            {
                                ">=": [
                                    {
                                        "var": "emotions.sympathy"
                                    },
                                    0.25
                                ]
                            },
                            {
                                ">=": [
                                    {
                                        "var": "emotions.compassion"
                                    },
                                    0.25
                                ]
                            },
                            {
                                ">=": [
                                    {
                                        "var": "emotions.trust"
                                    },
                                    0.25
                                ]
                            },
                            {
                                ">=": [
                                    {
                                        "var": "emotions.affection"
                                    },
                                    0.25
                                ]
                            },
                            {
                                ">=": [
                                    {
                                        "var": "moodAxes.affiliation"
                                    },
                                    15
                                ]
                            }
                        ]
                    },
                    {
                        "<=": [
                            {
                                "var": "moodAxes.threat"
                            },
                            45
                        ]
                    },
                    {
                        "<=": [
                            {
                                "var": "emotions.fear"
                            },
                            0.45
                        ]
                    },
                    {
                        "<=": [
                            {
                                "var": "emotions.panic"
                            },
                            0.55
                        ]
                    },
                    {
                        "or": [
                            {
                                ">=": [
                                    {
                                        "var": "moodAxes.engagement"
                                    },
                                    10
                                ]
                            },
                            {
                                ">=": [
                                    {
                                        "var": "emotions.determination"
                                    },
                                    0.35
                                ]
                            },
                            {
                                ">=": [
                                    {
                                        "var": "moodAxes.affiliation"
                                    },
                                    20
                                ]
                            },
                            {
                                ">=": [
                                    {
                                        "var": "emotions.sympathy"
                                    },
                                    0.4
                                ]
                            }
                        ]
                    },
                    {
                        "or": [
                            {
                                ">=": [
                                    {
                                        "-": [
                                            {
                                                "var": "emotions.remorse"
                                            },
                                            {
                                                "var": "previousEmotions.remorse"
                                            }
                                        ]
                                    },
                                    0.1
                                ]
                            },
                            {
                                ">=": [
                                    {
                                        "-": [
                                            {
                                                "var": "emotions.guilt"
                                            },
                                            {
                                                "var": "previousEmotions.guilt"
                                            }
                                        ]
                                    },
                                    0.1
                                ]
                            }
                        ]
                    },
                    {
                        "<=": [
                            {
                                "var": "previousEmotions.remorse"
                            },
                            0.65
                        ]
                    },
                    {
                        "<=": [
                            {
                                "var": "previousEmotions.guilt"
                            },
                            0.62
                        ]
                    },
                    {
                        "or": [
                            {
                                "and": [
                                    {
                                        "<=": [
                                            {
                                                "var": "moodAxes.inhibitory_control"
                                            },
                                            10
                                        ]
                                    },
                                    {
                                        "<=": [
                                            {
                                                "var": "affectTraits.self_control"
                                            },
                                            65
                                        ]
                                    }
                                ]
                            },
                            {
                                "and": [
                                    {
                                        ">=": [
                                            {
                                                "var": "emotions.guilt"
                                            },
                                            0.55
                                        ]
                                    },
                                    {
                                        ">=": [
                                            {
                                                "var": "emotions.remorse"
                                            },
                                            0.62
                                        ]
                                    }
                                ]
                            }
                        ]
                    }
                ]
            },
            "failure_message": "Models 'impulse' vs 'considered repair': if inhibitory_control is high AND trait self_control is high, moderate guilt/remorse should not produce urgent restless repair-chasing; it should look deliberate. The second branch preserves triggering for very high guilt/remorse where even controlled people feel compelled."
        }
    ],
    "actor_description": "The moment keeps replaying, sharp as a splinter under the skin. It isn't just bad-it feels mine. My chest tightens with a simple, relentless logic: do something. Fix what I can, admit what I did, offer whatever repairs are still possible. I catch myself scanning for an opening-an apology, a task, a gesture-anything that turns this weight into motion.",
    "description_text": "{actor} becomes purposefully restless-hovering, stepping in too quickly, trying to make themselves useful. They speak with a careful urgency, offering help and explanations that arrive a beat too fast. Their attention keeps darting to the person they wronged, searching for a sign the damage can still be repaired.",
    "alternate_descriptions": {
        "auditory": "I hear a rush of words-apologies, clarifications, offers-stacked on top of each other like someone can't bear a gap in the air."
    },
    "category": "shame",
    "diagnosticStatus": "unknown"
}