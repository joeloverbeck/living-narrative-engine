{
  "$schema": "schema://living-narrative-engine/rule.schema.json",
  "rule_id": "log_perceptible_events",
  "comment": "Logs all perceptible events via ADD_PERCEPTION_LOG_ENTRY operation.",
  "event_type": "core:perceptible_event",
  "actions": [
    {
      "type": "ADD_PERCEPTION_LOG_ENTRY",
      "parameters": {
        "location_id": "{event.payload.locationId}",
        "entry": {
          "descriptionText": "{event.payload.descriptionText}",
          "timestamp": "{event.payload.timestamp}",
          "perceptionType": "{event.payload.perceptionType}",
          "actorId": "{event.payload.actorId}",
          "targetId": "{event.payload.targetId}",
          "involvedEntities": "{event.payload.involvedEntities}"
        },
        "originating_actor_id": "{event.payload.actorId}",
        "recipient_ids": "{event.payload.contextualData.recipientIds}",
        "excluded_actor_ids": "{event.payload.contextualData.excludedActorIds}",
        "actor_description": "{event.payload.actorDescription}",
        "target_description": "{event.payload.targetDescription}",
        "target_id": "{event.payload.targetId}",
        "alternate_descriptions": "{event.payload.alternateDescriptions}",
        "sense_aware": "{event.payload.senseAware}"
      }
    }
  ]
}
