{
  "$schema": "schema://living-narrative-engine/refinement-method.schema.json",
  "id": "core:arm_self.pick_up_and_wield",
  "taskId": "core:arm_self",
  "description": "Pick up a weapon from the environment and wield it. This two-step method is used when a suitable weapon is nearby but not yet in the actor's possession. The actor first acquires the weapon, then equips it for combat readiness.",
  "applicability": {
    "description": "Weapon must be accessible in the environment (not in inventory)",
    "condition": {
      "and": [
        {"has_component": ["task.params.weapon", "core:in_reach"]},
        {"not": {"has_component": ["task.params.weapon", "core:in_inventory"]}},
        {"has_component": ["actor", "core:free_hands"]}
      ]
    }
  },
  "steps": [
    {
      "stepType": "primitive_action",
      "actionId": "items:pick_up_item",
      "targetBindings": {
        "item": "task.params.weapon"
      },
      "description": "Pick up the weapon from its current location"
    },
    {
      "stepType": "primitive_action",
      "actionId": "equipment:equip_weapon",
      "targetBindings": {
        "weapon": "task.params.weapon"
      },
      "parameters": {
        "hand": "primary",
        "ready": true
      },
      "description": "Equip the weapon in primary hand"
    }
  ],
  "fallbackBehavior": "replan"
}
