{
  "$schema": "schema://living-narrative-engine/refinement-method.schema.json",
  "id": "core:consume_nourishing_item.pick_up_and_consume",
  "taskId": "core:consume_nourishing_item",
  "description": "Two-step consumption method for items that are nearby but not yet in inventory. The actor first picks up the item, then consumes it. This method is used when the simple_consume method's applicability conditions are not met (item not in inventory).",
  "applicability": {
    "description": "Item must be in reach but not in inventory",
    "condition": {
      "and": [
        {"has_component": ["task.params.item", "core:in_reach"]},
        {"not": {"has_component": ["task.params.item", "core:in_inventory"]}}
      ]
    }
  },
  "steps": [
    {
      "stepType": "primitive_action",
      "actionId": "items:pick_up_item",
      "targetBindings": {
        "item": "task.params.item"
      },
      "description": "Pick up the nourishing item from its current location"
    },
    {
      "stepType": "primitive_action",
      "actionId": "items:consume_item",
      "targetBindings": {
        "item": "task.params.item"
      },
      "description": "Consume the item after picking it up"
    }
  ],
  "fallbackBehavior": "replan"
}
