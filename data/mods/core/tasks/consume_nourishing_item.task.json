{
  "$schema": "schema://living-narrative-engine/task.schema.json",
  "id": "core:consume_nourishing_item",
  "description": "Consume a nourishing item (food or drink) to satisfy hunger or thirst. This is a simple, common task that most actors with digestive systems can perform. The actor must know about the item and it must be accessible (either in inventory or nearby).",
  "structuralGates": {
    "description": "Actor must have a digestive system to consume nourishment",
    "condition": {
      "has_component": ["actor", "core:digestive_system"]
    }
  },
  "planningScope": "core:known_consumable_items",
  "planningPreconditions": [
    {
      "description": "Actor must be hungry or thirsty to warrant consuming nourishment",
      "condition": {
        "or": [
          {"has_component": ["actor", "core:hungry"]},
          {"has_component": ["actor", "core:thirsty"]}
        ]
      }
    },
    {
      "description": "Item must be accessible (either in actor's inventory or in reach)",
      "condition": {
        "or": [
          {"has_component": ["task.params.item", "core:in_inventory"]},
          {"has_component": ["task.params.item", "core:in_reach"]}
        ]
      }
    }
  ],
  "planningEffects": [
    {
      "type": "REMOVE_COMPONENT",
      "parameters": {
        "entityId": "actor",
        "componentId": "core:hungry"
      }
    },
    {
      "type": "REMOVE_COMPONENT",
      "parameters": {
        "entityId": "actor",
        "componentId": "core:thirsty"
      }
    },
    {
      "type": "REMOVE_COMPONENT",
      "parameters": {
        "entityId": "task.params.item",
        "componentId": "core:exists"
      }
    }
  ],
  "refinementMethods": [
    {
      "methodId": "core:consume_nourishing_item.simple_consume",
      "$ref": "./refinement-methods/consume_nourishing_item.simple_consume.refinement.json"
    },
    {
      "methodId": "core:consume_nourishing_item.pick_up_and_consume",
      "$ref": "./refinement-methods/consume_nourishing_item.pick_up_and_consume.refinement.json"
    }
  ],
  "cost": 10,
  "priority": 50
}
