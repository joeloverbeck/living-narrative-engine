{
  "$schema": "http://example.com/schemas/component.schema.json",
  "id": "clothing:clothing_slot",
  "description": "Extends anatomy sockets for clothing-specific behavior and layering",
  "dataSchema": {
    "type": "object",
    "properties": {
      "clothingSlots": {
        "type": "array",
        "description": "Array of clothing slots that extend anatomy sockets",
        "items": {
          "type": "object",
          "properties": {
            "slotId": {
              "type": "string",
              "description": "Unique identifier for this clothing slot"
            },
            "anatomySocket": {
              "type": "string",
              "description": "Reference to the anatomy socket this clothing slot extends"
            },
            "allowedLayers": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["underwear", "base", "outer", "accessories"]
              },
              "description": "Layers that can be equipped in this slot"
            },
            "layerOrder": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["underwear", "base", "outer", "accessories"]
              },
              "description": "Required order of layers (innermost to outermost)"
            },
            "maxItemsPerLayer": {
              "type": "integer",
              "minimum": 1,
              "maximum": 10,
              "default": 1,
              "description": "Maximum number of items allowed per layer"
            },
            "size": {
              "type": "string",
              "enum": ["xs", "s", "m", "l", "xl", "xxl"],
              "description": "Size constraint for items in this slot"
            },
            "tags": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Tags for categorizing and filtering clothing slots"
            },
            "conflictResolution": {
              "type": "string",
              "enum": [
                "auto_remove",
                "prompt_user",
                "block_equip",
                "layer_swap"
              ],
              "default": "auto_remove",
              "description": "How to handle conflicts in this slot"
            },
            "layerRequirements": {
              "type": "object",
              "description": "Requirements for specific layers",
              "patternProperties": {
                "^(underwear|base|outer|accessories)$": {
                  "type": "object",
                  "properties": {
                    "requires": {
                      "type": "array",
                      "items": { "type": "string" },
                      "description": "Layers that must be present before this layer can be equipped"
                    },
                    "excludes": {
                      "type": "array",
                      "items": { "type": "string" },
                      "description": "Layers that cannot be present with this layer"
                    }
                  },
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            },
            "coverage": {
              "type": "object",
              "description": "Coverage requirements for this slot",
              "properties": {
                "bodyParts": {
                  "type": "array",
                  "items": { "type": "string" },
                  "description": "Body parts this slot covers"
                },
                "exclusive": {
                  "type": "boolean",
                  "default": false,
                  "description": "Whether this slot provides exclusive coverage"
                }
              },
              "additionalProperties": false
            }
          },
          "required": ["slotId", "anatomySocket", "allowedLayers"],
          "additionalProperties": false
        }
      }
    },
    "required": ["clothingSlots"],
    "additionalProperties": false
  }
}
