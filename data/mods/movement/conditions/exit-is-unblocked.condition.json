{
  "$schema": "schema://living-narrative-engine/condition.schema.json",
  "id": "movement:exit-is-unblocked",
  "description": "Checks if an exit is unblocked (no blocker, or blocker is unlocked/unlockable).",
  "logic": {
    "or": [
      { "!": { "var": "entity.blocker" } },
      {
        "and": [
          { "var": "entity.blocker" },
          {
            "or": [
              {
                "!": {
                  "get_component_value": [
                    { "var": "entity.blocker" },
                    "mechanisms:openable"
                  ]
                }
              },
              {
                "==": [
                  {
                    "get_component_value": [
                      { "var": "entity.blocker" },
                      "mechanisms:openable",
                      "isLocked"
                    ]
                  },
                  false
                ]
              }
            ]
          }
        ]
      }
    ]
  }
}
