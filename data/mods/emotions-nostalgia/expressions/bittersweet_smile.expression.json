{
    "$schema": "schema://living-narrative-engine/expression.schema.json",
    "id": "emotions-nostalgia:bittersweet_smile",
    "description": "Mixed-valence nostalgia\u2014warmth threaded with ache. The memory-feel lands tender rather than crushing: a small smile that doesn\u2019t quite outrun the sting.",
    "category": "loss",
    "actor_description": "A warmth rises in me, and it hurts at the same time\u2014like pressure behind the eyes paired with a sudden softness in the chest. I catch myself smiling, then feeling the smile wobble at the edges. The ache doesn\u2019t vanish; it just stops being sharp, turning into something I can hold without breaking.",
    "description_text": "{actor} smiles faintly, but there\u2019s a sheen of ache in it\u2014eyes a touch damp, expression pulled between fondness and pain. Their breathing slows as if they\u2019re letting something tender settle without letting it swallow them.",
    "priority": 71,
    "prerequisites": [
        {
            "logic": {
                "and": [
                    {
                        ">=": [
                            {
                                "var": "emotions.nostalgia"
                            },
                            0.55
                        ]
                    },
                    {
                        ">=": [
                            {
                                "var": "emotions.sadness"
                            },
                            0.35
                        ]
                    },
                    {
                        "<": [
                            {
                                "var": "emotions.grief"
                            },
                            0.5
                        ]
                    },
                    {
                        ">=": [
                            {
                                "var": "moodAxes.valence"
                            },
                            -20
                        ]
                    },
                    {
                        "<=": [
                            {
                                "var": "moodAxes.valence"
                            },
                            20
                        ]
                    },
                    {
                        ">=": [
                            {
                                "var": "moodAxes.engagement"
                            },
                            10
                        ]
                    },
                    {
                        "<=": [
                            {
                                "var": "moodAxes.threat"
                            },
                            30
                        ]
                    },
                    {
                        ">=": [
                            {
                                "var": "moodAxes.arousal"
                            },
                            -35
                        ]
                    },
                    {
                        "<=": [
                            {
                                "var": "moodAxes.arousal"
                            },
                            25
                        ]
                    },
                    {
                        "<=": [
                            {
                                "var": "emotions.despair"
                            },
                            0.45
                        ]
                    },
                    {
                        "<=": [
                            {
                                "var": "emotions.numbness"
                            },
                            0.55
                        ]
                    },
                    {
                        "<=": [
                            {
                                "var": "emotions.joy"
                            },
                            0.65
                        ]
                    },
                    {
                        "<=": [
                            {
                                "var": "emotions.euphoria"
                            },
                            0.35
                        ]
                    },
                    {
                        "or": [
                            {
                                ">=": [
                                    {
                                        "-": [
                                            {
                                                "var": "emotions.nostalgia"
                                            },
                                            {
                                                "var": "previousEmotions.nostalgia"
                                            }
                                        ]
                                    },
                                    0.1
                                ]
                            },
                            {
                                "and": [
                                    {
                                        ">=": [
                                            {
                                                "-": [
                                                    {
                                                        "var": "emotions.nostalgia"
                                                    },
                                                    {
                                                        "var": "previousEmotions.nostalgia"
                                                    }
                                                ]
                                            },
                                            0.06
                                        ]
                                    },
                                    {
                                        ">=": [
                                            {
                                                "-": [
                                                    {
                                                        "var": "previousEmotions.sadness"
                                                    },
                                                    {
                                                        "var": "emotions.sadness"
                                                    }
                                                ]
                                            },
                                            0.1
                                        ]
                                    }
                                ]
                            },
                            {
                                "and": [
                                    {
                                        "<": [
                                            {
                                                "var": "previousEmotions.nostalgia"
                                            },
                                            0.55
                                        ]
                                    },
                                    {
                                        ">=": [
                                            {
                                                "var": "emotions.nostalgia"
                                            },
                                            0.55
                                        ]
                                    }
                                ]
                            }
                        ]
                    }
                ]
            },
            "failure_message": "Requires strong nostalgia with moderate sadness (but not grief), grounded in near-neutral valence with low threat and present engagement. Caps despair/numbness (too collapsed) and joy/euphoria (too bright). Triggers only on a nostalgia rise (or nostalgia rising as sadness eases) to prevent spam."
        }
    ],
    "alternate_descriptions": {
        "auditory": "I hear a small, involuntary exhale\u2014half laugh, half sigh\u2014like my voice almost wants to say something kind and can\u2019t quite commit.",
        "tactile": "The muscles around my mouth tighten into a smile while my throat thickens, like two impulses meeting in the same small space. My face feels warm, and my chest feels oddly tender."
    },
    "diagnosticStatus": "unknown"
}
